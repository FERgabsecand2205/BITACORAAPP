(()=>{"use strict";var e={8162:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ke});var r=o(7225),n=o(6665),a=o(3668),l=o(3929),i=o(2190),s=o(3986),d=o(296),u=o(6283),c=o(1690),f=o(2852),g=a.default.create({container:{flex:1,justifyContent:"center",padding:16},titleLogIn:{fontSize:20,fontWeight:"bold",textAlign:"center",color:"black",paddingBlock:10},titleHeader:{color:"black",fontSize:20,fontWeight:"bold",paddingVertical:12},containerheader:{justifyContent:"center",width:"100%",alignItems:"center",paddingVertical:12},separator:{height:1,backgroundColor:"black",width:"100%",marginTop:12},input:{borderColor:"black",borderWidth:1,borderRadius:5,padding:10,marginBottom:10},recoveryText:{color:"blue",textAlign:"left",marginTop:16},privacyText:{color:"blue",textAlign:"left",marginTop:16},button:{backgroundColor:"#414BB2",padding:10,borderRadius:5,alignItems:"center",marginTop:16,width:"100%"},buttonText:{color:"white",fontWeight:"bold"},secondaryButton:{backgroundColor:"transparent",borderColor:"#414BB2",borderWidth:1,padding:10,borderRadius:5,alignItems:"center",marginTop:16,width:"100%"},secondaryButtonText:{color:"#414BB2",fontWeight:"bold"},appBar:{flexDirection:"row",justifyContent:"space-around",padding:5,backgroundColor:"#414BB2",marginTop:10},appBarText:{color:"white",fontWeight:"bold"}}),p=o(5648),m=o(397);const h=function(e){var t=e.title,o=e.onPress,r=e.type,n=void 0===r?"primary":r,a="primary"===n?g.button:g.secondaryButton,l="primary"===n?g.buttonText:g.secondaryButtonText;return(0,m.jsx)(p.default,{style:a,onPress:o,children:(0,m.jsx)(u.default,{style:l,children:t})})};const b=function(e){var t=e.titleName;return(0,m.jsxs)(l.default,{style:g.containerheader,children:[(0,m.jsx)(u.default,{style:g.titleHeader,children:t}),(0,m.jsx)(l.default,{style:g.separator})]})};var x=a.default.create({containerPage:{flex:1,backgroundColor:"white",width:"100%"},headerContainer:{minHeight:50,width:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"white",paddingTop:12},contentBody:{flex:1,marginTop:5,marginBottom:5,padding:20,width:"100%"},body:{flex:1,justifyContent:"center",alignItems:"center"},footer:{marginTop:20,flex:.1,justifyContent:"center",alignItems:"center"},buttonContainer:{justifyContent:"center",alignItems:"center",padding:20}});const y=function(e){var t=e.header,o=e.body,r=e.buttons,n=e.footer;return(0,m.jsxs)(l.default,{style:x.containerPage,children:[(0,m.jsx)(l.default,{style:x.headerContainer,children:t}),(0,m.jsx)(l.default,{style:x.contentBody,children:(0,m.jsx)(l.default,{style:x.body,children:o})}),(0,m.jsx)(l.default,{style:x.buttonContainer,children:r}),(0,m.jsx)(l.default,{style:x.footer,children:n})]})};var j=function(e){var t=e.iconColor,o=e.bitacoraName,r=e.bitacoraState,a=e.bitacoraHours,i=function(e){var t=e.split(":").map(Number),o=(0,d.default)(t,3);return 3600*o[0]+60*o[1]+o[2]}(a),s=t||(i<=288e3?"green":i<=324e3?"orange":"red");return(0,n.useEffect)((function(){i>324e3&&c.default.alert("Advertencia","Se aproxima el mantenimiento de 100 Hrs de vuelo de esta aeronave",[{text:"OK",onPress:function(){return console.log("OK Pressed")}}])}),[i]),(0,m.jsxs)(l.default,{style:v.bitacoraContainer,children:[(0,m.jsx)(f.default,{name:"document",size:50,color:s,style:v.marginDocument}),(0,m.jsxs)(l.default,{style:v.bitacoraTextContainer,children:[(0,m.jsx)(u.default,{style:v.bitacoraTextTitle,children:o}),(0,m.jsxs)(u.default,{style:v.bitacoraText,children:["Estado: ",r]}),(0,m.jsxs)(u.default,{style:v.bitacoraText,children:["Hrs: ",a]})]})]})},v=a.default.create({bitacoraTextTitle:{fontSize:20,fontWeight:"bold"},bitacoraContainer:{flexDirection:"row",alignItems:"center",marginVertical:5},bitacoraTextContainer:{flex:1},bitacoraText:{fontSize:14,marginVertical:5},marginDocument:{marginRight:"10%",marginLeft:"5%"},bodyContent:{flex:.7,justifyContent:"center",alignItems:"center"},footer:{marginTop:20,flex:.1,justifyContent:"center",alignItems:"center"}});const C=function(){var e=(0,s.useNavigate)();return(0,m.jsx)(y,{header:(0,m.jsx)(b,{titleName:"Bit\xe1cora de Aeronaves"}),body:(0,m.jsxs)(l.default,{style:v.bodyContent,children:[(0,m.jsx)(j,{bitacoraName:"Bell 412 Mat.1213",bitacoraState:"Operativo",bitacoraHours:"64:25:42"}),(0,m.jsx)(j,{bitacoraName:"Bell 412 Mat.1122",bitacoraState:"En mantenimiento",bitacoraHours:"75:25:56"}),(0,m.jsx)(j,{bitacoraName:"Bell 412 Mat.1625",bitacoraState:"Sin novedad",bitacoraHours:"80:52:42"}),(0,m.jsx)(j,{bitacoraName:"Bell 412 Mat.1017",bitacoraState:"Sin novedad",bitacoraHours:"85:25:50"})]}),buttons:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h,{title:"Comenzar Nueva Bit\xe1cora",onPress:function(){e("/newBitacora")}}),(0,m.jsx)(h,{title:"Administrar Todas las Actividades",onPress:function(){e("/adminallactivities")}})]}),footer:(0,m.jsx)(l.default,{style:v.footer})})};var S=o(467),T=a.default.create({centered:{alignItems:"center",justifyContent:"center"},title:{fontSize:32,marginBottom:10}});const w=function(){var e=(0,s.useNavigate)(),t=function(){var e=(0,S.default)((function*(){try{if(console.log("=== Verificando estado del servidor ==="),(yield fetch("https://bitacoraapp.onrender.com/api/bitacoras")).ok)return console.log("\u2705 Servidor funcionando correctamente"),!0}catch(e){return console.log("\u274c Servidor no est\xe1 funcionando"),console.log("=== Instrucciones para iniciar el servidor ==="),console.log("1. Abre una terminal nueva"),console.log("2. Navega al directorio del backend:"),console.log("   cd BITACORABACKEND"),console.log("3. Inicia el servidor:"),console.log("   node src/server.js"),console.log('4. Espera a ver el mensaje: "Servidor corriendo en http://localhost:3001"'),!1}}));return function(){return e.apply(this,arguments)}}(),o=function(){var o=(0,S.default)((function*(){(yield t())?e("/newBitacora"):c.default.alert("Servidor no disponible","El servidor backend no est\xe1 funcionando. Por favor, inicia el servidor antes de continuar.",[{text:"Entendido",style:"cancel"}])}));return function(){return o.apply(this,arguments)}}();return(0,m.jsx)(y,{header:(0,m.jsx)(b,{titleName:"Bienvenido"}),body:(0,m.jsxs)(l.default,{style:T.centered,children:[(0,m.jsx)(u.default,{style:T.title,children:"Bit\xe1cora App"}),(0,m.jsx)(f.default,{name:"airplane",size:50,color:"black"})]}),buttons:(0,m.jsx)(h,{title:"Iniciar",onPress:o}),footer:(0,m.jsx)(l.default,{children:(0,m.jsx)(u.default,{})})})};var E=o(6773),O=o(5410),B=o(9201),P=B.object().shape({tipoAeronave:B.string().required("El tipo de aeronave es requerido").min(2,"El tipo de aeronave debe tener al menos 2 caracteres"),matricula:B.string().required("La matr\xedcula es requerida").matches(/^[A-Z0-9-]+$/,"La matr\xedcula solo debe contener letras may\xfasculas, n\xfameros y guiones"),organismo:B.string().required("El organismo es requerido").min(2,"El organismo debe tener al menos 2 caracteres"),folio:B.string().required("El folio es requerido").matches(/^\d{4}-\d{3}$/,"El folio debe tener el formato YYYY-XXX (ejemplo: 2024-001)")}),I=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:2},buttonText:{color:"white"}});const D=function(){var e=(0,s.useNavigate)(),t=function(){var t=(0,S.default)((function*(t){try{console.log("=== NewBitacora - Intentando crear bit\xe1cora ==="),console.log("Datos a enviar:",t);var o=yield fetch("https://bitacoraapp.onrender.com/api/bitacora",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok){var r=yield o.json();if("Ya existe una bit\xe1cora con este folio"===r.error)return void c.default.alert("Folio duplicado","El folio que intentas usar ya existe. Por favor, usa un folio diferente.",[{text:"Entendido",style:"cancel"}]);throw new Error(r.error||"Error al guardar los datos")}var n=yield o.json();console.log("=== NewBitacora - Bit\xe1cora creada exitosamente ==="),console.log("ID recibido del backend:",n._id),console.log("Folio:",t.folio),c.default.alert("\xc9xito","Bit\xe1cora creada exitosamente"),e("/InfoFlight",{state:{folio:t.folio,bitacoraId:n._id}}),console.log("=== NewBitacora - Despu\xe9s de navegar ==="),console.log("Estado de navegaci\xf3n enviado:",{folio:t.folio,bitacoraId:n._id})}catch(a){console.error("Error completo:",a),c.default.alert("Error",a.message||"Hubo un problema al guardar los datos")}}));return function(e){return t.apply(this,arguments)}}();return(0,m.jsx)(y,{header:(0,m.jsx)(b,{titleName:"Nueva Bit\xe1cora"}),body:(0,m.jsx)(O.Formik,{initialValues:{tipoAeronave:"",matricula:"",organismo:"",folio:""},validationSchema:P,onSubmit:t,children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values,a=e.errors,i=e.touched;return(0,m.jsxs)(l.default,{style:I.body,children:[(0,m.jsxs)(l.default,{style:I.inputGroup,children:[(0,m.jsx)(u.default,{style:I.label,children:"Tipo de Aeronave"}),(0,m.jsx)(E.default,{style:[I.input,i.tipoAeronave&&a.tipoAeronave&&I.inputError],onChangeText:t("tipoAeronave"),onBlur:o("tipoAeronave"),value:n.tipoAeronave,placeholder:"Ej: Bell 412"}),i.tipoAeronave&&a.tipoAeronave&&(0,m.jsx)(u.default,{style:I.errorText,children:a.tipoAeronave})]}),(0,m.jsxs)(l.default,{style:I.inputGroup,children:[(0,m.jsx)(u.default,{style:I.label,children:"Matr\xedcula"}),(0,m.jsx)(E.default,{style:[I.input,i.matricula&&a.matricula&&I.inputError],onChangeText:t("matricula"),onBlur:o("matricula"),value:n.matricula,placeholder:"Ej: 1213"}),i.matricula&&a.matricula&&(0,m.jsx)(u.default,{style:I.errorText,children:a.matricula})]}),(0,m.jsxs)(l.default,{style:I.inputGroup,children:[(0,m.jsx)(u.default,{style:I.label,children:"Organismo"}),(0,m.jsx)(E.default,{style:[I.input,i.organismo&&a.organismo&&I.inputError],onChangeText:t("organismo"),onBlur:o("organismo"),value:n.organismo,placeholder:"Ej: SEDENA"}),i.organismo&&a.organismo&&(0,m.jsx)(u.default,{style:I.errorText,children:a.organismo})]}),(0,m.jsxs)(l.default,{style:I.inputGroup,children:[(0,m.jsx)(u.default,{style:I.label,children:"Folio"}),(0,m.jsx)(E.default,{style:[I.input,i.folio&&a.folio&&I.inputError],onChangeText:t("folio"),onBlur:o("folio"),value:n.folio,placeholder:"Ej: 2024-001"}),i.folio&&a.folio&&(0,m.jsx)(u.default,{style:I.errorText,children:a.folio})]}),(0,m.jsx)(h,{title:(0,m.jsx)(u.default,{style:I.buttonText,children:"Continuar"}),onPress:r})]})}}),footer:(0,m.jsx)(l.default,{children:(0,m.jsx)(u.default,{})})})};var F=o(9162),A=o(4307),N=a.default.create({containerPage:{flex:1,backgroundColor:"white",width:"100%"},headerContainer:{minHeight:50,width:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"white",paddingTop:12},contentBody:{flex:1,marginTop:5,marginBottom:5,padding:20,width:"100%"},body:{flex:1,justifyContent:"center",alignItems:"center"},footer:{marginTop:20,flex:.1,justifyContent:"center",alignItems:"center"},buttonContainer:{justifyContent:"center",alignItems:"center",padding:20}});const k=function(e){var t=e.header,o=e.body,r=e.buttons,n=e.footer;return(0,m.jsxs)(l.default,{style:N.containerPage,children:[(0,m.jsx)(l.default,{style:N.headerContainer,children:t}),(0,m.jsx)(A.default,{style:N.contentBody,children:(0,m.jsx)(l.default,{style:N.body,children:o})}),(0,m.jsx)(l.default,{style:N.buttonContainer,children:r}),(0,m.jsx)(l.default,{style:N.footer,children:n})]})};var R=a.default.create({container:{width:"100%",marginBottom:10},label:{textAlign:"left",marginBottom:5},buttonGroup:{flexDirection:"row",justifyContent:"space-between",width:"100%"},button:{flex:1,backgroundColor:"white",padding:10,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"gray",marginHorizontal:2},selectedButton:{backgroundColor:"black"},buttonText:{color:"black"},selectedButtonText:{color:"white"}});const L=function(e){var t=e.onSelect,o=e.title,r=(0,n.useState)(null),a=(0,d.default)(r,2),i=a[0],s=a[1];return(0,m.jsxs)(l.default,{style:R.container,children:[(0,m.jsx)(u.default,{style:R.label,children:o}),(0,m.jsx)(l.default,{style:R.buttonGroup,children:["A","B","C","D"].map((function(e){return(0,m.jsx)(p.default,{style:[R.button,i===e&&R.selectedButton],onPress:function(){return function(e){s(e),t&&t(e)}(e)},children:(0,m.jsx)(u.default,{style:[R.buttonText,i===e&&R.selectedButtonText],children:e})},e)}))})]})};var z=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},observacionesInput:{height:80,textAlignVertical:"top",paddingTop:8},buttonText:{color:"white"}});const G=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),o=n.useState(new Date),r=(0,d.default)(o,2),a=r[0],i=r[1],f=n.useState(!1),g=(0,d.default)(f,2),p=g[0],x=g[1];n.useEffect((function(){var e,o;console.log("=== InfoFlight - Al recibir el estado ==="),console.log("Estado recibido:",t.state),console.log("ID de la bit\xe1cora recibido:",null==(e=t.state)?void 0:e.bitacoraId),console.log("Folio recibido:",null==(o=t.state)?void 0:o.folio)}),[t.state]);var y=function(){var o=(0,S.default)((function*(o){try{var r,n=null==(r=t.state)?void 0:r.folio;if(!n)throw new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlight - Antes de actualizar ==="),console.log("Folio de la bit\xe1cora:",n),console.log("Datos a enviar:",o);var a=yield fetch(`https://bitacoraapp.onrender.com/api/bitacora/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("Respuesta del servidor:",a.status),!a.ok){var l=yield a.json();throw new Error(l.error||"Error al actualizar los datos")}var i=yield a.json();console.log("=== InfoFlight - Despu\xe9s de actualizar ==="),console.log("Datos actualizados:",i),c.default.alert("\xc9xito","Datos de vuelo guardados exitosamente"),console.log("=== InfoFlight - Antes de navegar ==="),console.log("Estado a enviar:",{flightData:o,folio:n}),e("/InfoFlightPt2",{state:{flightData:o,folio:n}})}catch(s){console.error("Error completo:",s),c.default.alert("Error",s.message||"Hubo un problema al guardar los datos")}}));return function(e){return o.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"Informaci\xf3n de Vuelo"}),body:(0,m.jsx)(O.Formik,{initialValues:{lugarSalida:"",lugarLlegada:"",tipoVuelo:"",eventosTorque:"",cargaAceiteMotores:"",cargaAceiteAPU:"",fecha:a.toISOString().split("T")[0],categoria:"",observaciones:""},onSubmit:y,children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values,s=e.setFieldValue;return(0,m.jsxs)(l.default,{style:z.body,children:[(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Lugar de Salida"}),(0,m.jsx)(E.default,{style:z.input,onChangeText:function(e){console.log("Lugar de Salida cambiado:",e),t("lugarSalida")(e)},onBlur:o("lugarSalida"),value:n.lugarSalida})]}),(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Lugar de Llegada"}),(0,m.jsx)(E.default,{style:z.input,onChangeText:t("lugarLlegada"),onBlur:o("lugarLlegada"),value:n.lugarLlegada})]}),(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Tipo de Vuelo"}),(0,m.jsx)(E.default,{style:z.input,onChangeText:t("tipoVuelo"),onBlur:o("tipoVuelo"),value:n.tipoVuelo})]}),(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Eventos de Torque"}),(0,m.jsx)(E.default,{style:z.input,onChangeText:t("eventosTorque"),onBlur:o("eventosTorque"),value:n.eventosTorque})]}),(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Carga Aceite Motores"}),(0,m.jsx)(E.default,{style:z.input,onChangeText:t("cargaAceiteMotores"),onBlur:o("cargaAceiteMotores"),value:n.cargaAceiteMotores})]}),(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Carga Aceite A.P.U."}),(0,m.jsx)(E.default,{style:z.input,onChangeText:t("cargaAceiteAPU"),onBlur:o("cargaAceiteAPU"),value:n.cargaAceiteAPU})]}),(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Fecha"}),(0,m.jsx)(E.default,{style:z.input,value:n.fecha,onFocus:function(){return x(!0)}}),p&&(0,m.jsx)(F.default,{value:a,mode:"date",display:"default",onChange:function(e,t){if(function(e,t){var o=t||a;x(!1),i(o)}(0,t),t){var o=t.toISOString().split("T")[0];console.log("Fecha seleccionada:",o),s("fecha",o)}}})]}),(0,m.jsx)(L,{title:"Categoria",onSelect:function(e){console.log("Categor\xeda seleccionada:",e),s("categoria",e)}}),(0,m.jsxs)(l.default,{style:z.inputGroup,children:[(0,m.jsx)(u.default,{style:z.label,children:"Observaciones"}),(0,m.jsx)(E.default,{style:[z.input,z.observacionesInput],onChangeText:t("observaciones"),onBlur:o("observaciones"),value:n.observaciones,multiline:!0,numberOfLines:3})]}),(0,m.jsx)(h,{title:(0,m.jsx)(u.default,{style:z.buttonText,children:"Continuar"}),onPress:function(){console.log("Valores del formulario antes de enviar:",n),r()}})]})}}),footer:(0,m.jsx)(l.default,{children:(0,m.jsx)(u.default,{})})})};var q=a.default.create({smallButton:{width:"48%"}});const V=function(e){var t=e.title,o=e.onPress,r=e.type,n=void 0===r?"primary":r,a=e.style,l="primary"===n?g.button:g.secondaryButton,i="primary"===n?g.buttonText:g.secondaryButtonText;return(0,m.jsx)(p.default,{style:[l,q.smallButton,a],onPress:o,children:(0,m.jsx)(u.default,{style:i,children:t})})};var W=o(5458),M=a.default.create({container:{width:"100%",marginBottom:10},label:{textAlign:"left",marginBottom:5},inputContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%"},input:{width:"23%",height:40,borderWidth:1,borderColor:"gray",textAlign:"center",fontSize:16}});const H=function(e){var t=e.onChangeText,o=e.value,r=void 0===o?"":o,a=e.label,i=(0,n.useState)(["","","",""]),s=(0,d.default)(i,2),c=s[0],f=s[1],g=[(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null)];n.useEffect((function(){if(r){for(var e=r.split("").slice(0,4);e.length<4;)e.push("");f(e)}}),[r]);var p=function(e,o){e.length>1&&(e=e.charAt(0));var r=(0,W.default)(c);r[o]=e,f(r);var n=r.join("");t(n),e&&o<3&&g[o+1].current.focus()};return(0,m.jsxs)(l.default,{style:M.container,children:[(0,m.jsx)(u.default,{style:M.label,children:a}),(0,m.jsx)(l.default,{style:M.inputContainer,children:c.map((function(e,t){return(0,m.jsx)(E.default,{ref:g[t],style:M.input,value:e,onChangeText:function(e){return p(e,t)},onKeyPress:function(e){return function(e,t){"Backspace"===e.nativeEvent.key&&!c[t]&&t>0&&g[t-1].current.focus()}(e,t)},maxLength:1,autoCapitalize:"characters"},t)}))})]})};var U=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},subtitle:{fontSize:16,fontWeight:"bold",textAlign:"center",marginBottom:20,width:"100%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5,fontSize:14},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%",marginTop:10}});const $=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),o=n.useState(new Date),r=(0,d.default)(o,2),a=r[0],i=r[1],f=n.useState(!1),g=(0,d.default)(f,2),p=g[0],h=g[1];n.useEffect((function(){var e,o;console.log("=== InfoFlightPt2 - Al recibir el estado ==="),console.log("Estado recibido:",t.state),console.log("Datos de vuelo recibidos:",null==(e=t.state)?void 0:e.flightData),console.log("Folio recibido:",null==(o=t.state)?void 0:o.folio)}),[t.state]);var x=function(){var o=(0,S.default)((function*(o){try{var r,n,a,l=null==(r=t.state)?void 0:r.folio;if(!l)throw new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlightPt2 - Antes de actualizar ==="),console.log("Folio de la bit\xe1cora:",l),console.log("Datos a enviar:",o);var i=yield fetch(`https://bitacoraapp.onrender.com/api/bitacora/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({correcciones:[o]})});if(console.log("Respuesta del servidor:",i.status),!i.ok){var s=yield i.json();throw new Error(s.error||"Error al actualizar los datos")}var d=yield i.json();console.log("=== InfoFlightPt2 - Despu\xe9s de actualizar ==="),console.log("Datos actualizados:",d),c.default.alert("\xc9xito","Datos de mantenimiento guardados exitosamente"),console.log("=== InfoFlightPt2 - Antes de navegar ==="),console.log("Estado a enviar:",{flightData:null==(n=t.state)?void 0:n.flightData,maintenanceData:o,folio:l}),e("/InfoFlightComponents",{state:{flightData:null==(a=t.state)?void 0:a.flightData,maintenanceData:o,folio:l}})}catch(u){console.error("Error completo:",u),c.default.alert("Error",u.message||"Hubo un problema al guardar los datos")}}));return function(e){return o.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"Correcciones/Servicios"}),body:(0,m.jsx)(O.Formik,{initialValues:{fecha:a.toISOString().split("T")[0],codigoATA:"",mmReferencia:"",observaciones:""},onSubmit:x,children:function(t){var o=t.handleChange,r=t.handleBlur,n=t.handleSubmit,s=t.values,d=t.setFieldValue;return(0,m.jsxs)(l.default,{style:U.body,children:[(0,m.jsx)(u.default,{style:U.subtitle,children:"Correcciones o Servicios de Mantenimiento"}),(0,m.jsxs)(l.default,{style:U.inputGroup,children:[(0,m.jsx)(u.default,{style:U.label,children:"Fecha"}),(0,m.jsx)(E.default,{style:U.input,value:s.fecha,onFocus:function(){return h(!0)}}),p&&(0,m.jsx)(F.default,{value:a,mode:"date",display:"default",onChange:function(e,t){!function(e,t){var o=t||a;h(!1),i(o)}(0,t),t&&d("fecha",t.toISOString().split("T")[0])}})]}),(0,m.jsx)(H,{label:"C\xf3digo A.T.A. (Air Transport Association)",value:s.codigoATA,onChangeText:function(e){return d("codigoATA",e)}}),(0,m.jsxs)(l.default,{style:U.inputGroup,children:[(0,m.jsx)(u.default,{style:U.label,children:"MM (Referencia Manual de Mantenimiento)"}),(0,m.jsx)(E.default,{style:U.input,onChangeText:o("mmReferencia"),onBlur:r("mmReferencia"),value:s.mmReferencia})]}),(0,m.jsxs)(l.default,{style:U.inputGroup,children:[(0,m.jsx)(u.default,{style:U.label,children:"Observaciones"}),(0,m.jsx)(E.default,{style:U.input,onChangeText:o("observaciones"),onBlur:r("observaciones"),value:s.observaciones})]}),(0,m.jsxs)(l.default,{style:U.buttonContainer,children:[(0,m.jsx)(V,{title:"Previo",onPress:function(){return e("/InfoFlight")},style:{backgroundColor:"#3f51b5"}}),(0,m.jsx)(V,{title:"Continuar",onPress:n})]})]})}})})};var _="https://bitacoraapp.onrender.com/api",J=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},noteContainer:{marginVertical:10,width:"100%"},noteText:{textAlign:"center",fontSize:14,color:"#666"},highlightedText:{color:"#000",fontWeight:"bold",fontSize:16},componentCounter:{textAlign:"center",marginTop:5,color:"#3f51b5",fontWeight:"bold"},savedComponentsText:{textAlign:"center",marginTop:5,color:"#4CAF50",fontSize:12},buttonContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%",marginTop:10},disabledButton:{backgroundColor:"#9e9e9e",opacity:.7}});const Y=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),o=(0,n.useState)(1),r=(0,d.default)(o,2),a=r[0],i=r[1],f=(0,n.useState)([]),g=(0,d.default)(f,2),p=g[0],h=g[1];(0,n.useEffect)((function(){var e,o;console.log("=== InfoFlightComponents - Estado inicial ==="),console.log("Estado completo recibido:",t.state),null!=(e=t.state)&&e.componentCount&&i(t.state.componentCount),null!=(o=t.state)&&o.components&&h(t.state.components)}),[t.state]);var x=function(){var o=(0,S.default)((function*(o){try{var r,n,a;console.log("=== InfoFlightComponents - Continuando con el \xfaltimo componente ==="),console.log("Valores del \xfaltimo componente:",o);var l=[].concat((0,W.default)(p),[o]);console.log("Todos los componentes guardados:",l);var i=null==(r=t.state)?void 0:r.folio;if(console.log("Folio obtenido del estado:",i),!i)throw console.error("Estado actual:",t.state),new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlightComponents - Enviando datos al servidor ==="),console.log("URL:",`${_}/bitacora/${i}`),console.log("Datos a enviar:",{componentes:l});var s=yield fetch(`${_}/bitacora/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentes:l})});if(!s.ok){var d=yield s.json();throw console.error("Error del servidor:",d),new Error("Error al actualizar los componentes")}var u=yield s.json();console.log("Respuesta del servidor:",u);var f={componentData:l,folio:i,flightData:null==(n=t.state)?void 0:n.flightData,maintenanceData:null==(a=t.state)?void 0:a.maintenanceData};console.log("Estado a enviar a la siguiente p\xe1gina:",f),e("/InfoFlightOrders",{state:f})}catch(g){console.error("Error en handleContinue:",g),c.default.alert("Error","Hubo un error al guardar los componentes. Por favor, intente nuevamente.")}}));return function(e){return o.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"Componentes involucrados"}),body:(0,m.jsx)(O.Formik,{initialValues:{numeroParte:"",posicion:"",numeroSerieOFF:"",numeroSerieON:"",nomenclatura:""},onSubmit:function(o){console.log("=== InfoFlightComponents - Enviando formulario ==="),console.log("Valores del formulario actual:",o),console.log("Contador de componentes:",a),a<3?function(o){if(a<3){var r,n,l;console.log(`=== InfoFlightComponents - Creando componente ${a} ===`),console.log("Valores del componente:",o);var i=[].concat((0,W.default)(p),[o]);console.log("Lista actualizada de componentes:",i);var s={components:i,componentCount:a+1,folio:null==(r=t.state)?void 0:r.folio,flightData:null==(n=t.state)?void 0:n.flightData,maintenanceData:null==(l=t.state)?void 0:l.maintenanceData};console.log("Nuevo estado a enviar:",s),e("/InfoFlightComponents",{state:s,replace:!0})}}(o):x(o)},children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values;return(0,m.jsxs)(l.default,{style:J.body,children:[(0,m.jsxs)(l.default,{style:J.inputGroup,children:[(0,m.jsx)(u.default,{style:J.label,children:"N/P (Numero de partes del componente afectado)"}),(0,m.jsx)(E.default,{style:J.input,onChangeText:t("numeroParte"),onBlur:o("numeroParte"),value:n.numeroParte})]}),(0,m.jsxs)(l.default,{style:J.inputGroup,children:[(0,m.jsx)(u.default,{style:J.label,children:"POS (Posici\xf3n del componente afectado)"}),(0,m.jsx)(E.default,{style:J.input,onChangeText:t("posicion"),onBlur:o("posicion"),value:n.posicion})]}),(0,m.jsxs)(l.default,{style:J.inputGroup,children:[(0,m.jsx)(u.default,{style:J.label,children:"N/S OFF (Numero de serie del componente afectado)"}),(0,m.jsx)(E.default,{style:J.input,onChangeText:t("numeroSerieOFF"),onBlur:o("numeroSerieOFF"),value:n.numeroSerieOFF})]}),(0,m.jsxs)(l.default,{style:J.inputGroup,children:[(0,m.jsx)(u.default,{style:J.label,children:"N/S ON (Numero de serie del componente instalado)"}),(0,m.jsx)(E.default,{style:J.input,onChangeText:t("numeroSerieON"),onBlur:o("numeroSerieON"),value:n.numeroSerieON})]}),(0,m.jsxs)(l.default,{style:J.inputGroup,children:[(0,m.jsx)(u.default,{style:J.label,children:"Nomenclatura"}),(0,m.jsx)(E.default,{style:J.input,onChangeText:t("nomenclatura"),onBlur:o("nomenclatura"),value:n.nomenclatura})]}),(0,m.jsxs)(l.default,{style:J.noteContainer,children:[(0,m.jsxs)(u.default,{style:J.noteText,children:["En caso de ser mas de un componente, se debe repetir el formulario dando click en el bot\xf3n"," ",(0,m.jsx)(u.default,{style:J.highlightedText,children:"Crear"})," ","para crear un nuevo componente"]}),(0,m.jsxs)(u.default,{style:J.componentCounter,children:["Componente ",a," de 3"]}),a>1&&(0,m.jsxs)(u.default,{style:J.savedComponentsText,children:["Componentes guardados: ",p.length]})]}),(0,m.jsxs)(l.default,{style:J.buttonContainer,children:[(0,m.jsx)(V,{title:"Crear",onPress:r,style:[{backgroundColor:"#3f51b5"},a>=3&&J.disabledButton],disabled:a>=3}),(0,m.jsx)(V,{title:"Continuar",onPress:r})]})]})}})})};var X=o(4467);function K(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Z(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?K(Object(o),!0).forEach((function(t){(0,X.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):K(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Q=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:2},buttonContainer:{width:"100%",marginTop:20}});const ee=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)();n.useEffect((function(){var e,o,r,n;console.log("=== InfoFlightOrders - Estado inicial ==="),console.log("Estado completo recibido:",t.state),console.log("Folio recibido:",null==(e=t.state)?void 0:e.folio),console.log("Datos de componentes:",null==(o=t.state)?void 0:o.componentData),console.log("Datos de vuelo:",null==(r=t.state)?void 0:r.flightData),console.log("Datos de mantenimiento:",null==(n=t.state)?void 0:n.maintenanceData)}),[t.state]);var o=function(){var o=(0,S.default)((function*(o){try{var r,n=null==(r=t.state)?void 0:r.folio;if(!n)throw console.error("Error: No se encontr\xf3 el folio en el estado:",t.state),new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlightOrders - Antes de actualizar ==="),console.log("Folio de la bit\xe1cora:",n),console.log("Datos a enviar:",o),console.log("Estado actual completo:",t.state);var a=["ordenTrabajo","ordenSuministro","ordenConcentracion","solicitudComponente","categoria"].filter((function(e){return!o[e]}));if(a.length>0)throw console.error("Campos vac\xedos:",a),new Error(`Los siguientes campos son requeridos: ${a.join(", ")}`);var l=yield fetch(`https://bitacoraapp.onrender.com/api/bitacora/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ordenTrabajo:o.ordenTrabajo,ordenSuministro:o.ordenSuministro,ordenConcentracion:o.ordenConcentracion,solicitudComponente:o.solicitudComponente,categoria:o.categoria})});if(!l.ok){var i=yield l.json();throw console.error("Error del servidor:",i),new Error("Error al actualizar los datos de \xf3rdenes")}var s=yield l.json();console.log("=== InfoFlightOrders - Despu\xe9s de actualizar ==="),console.log("Respuesta completa del servidor:",s),console.log("Datos de la bit\xe1cora actualizados:",s.bitacora);var d={ordenTrabajo:s.bitacora.ordenTrabajo,ordenSuministro:s.bitacora.ordenSuministro,ordenConcentracion:s.bitacora.ordenConcentracion,solicitudComponente:s.bitacora.solicitudComponente,categoria:s.bitacora.categoria};console.log("Campos actualizados en la base de datos:",d);var u=Z(Z({},t.state),{},{ordersData:o});console.log("=== InfoFlightOrders - Estado final ==="),console.log("Estado a enviar a la siguiente p\xe1gina:",u),e("/signatureIssuing",{state:u})}catch(f){console.error("Error en handleSubmit:",f),c.default.alert("Error",f.message||"Hubo un error al guardar los datos de \xf3rdenes. Por favor, intente nuevamente.")}}));return function(e){return o.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"\xd3rdenes y Solicitudes"}),body:(0,m.jsx)(O.Formik,{initialValues:{ordenTrabajo:"",ordenSuministro:"",ordenConcentracion:"",solicitudComponente:"",categoria:""},onSubmit:o,validate:function(e){var t={};return e.ordenTrabajo||(t.ordenTrabajo="La orden de trabajo es requerida"),e.ordenSuministro||(t.ordenSuministro="La orden de suministro es requerida"),e.ordenConcentracion||(t.ordenConcentracion="La orden de concentraci\xf3n es requerida"),e.solicitudComponente||(t.solicitudComponente="La solicitud de componente es requerida"),e.categoria||(t.categoria="La categor\xeda es requerida"),t},children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values,a=e.setFieldValue,i=e.errors,s=e.touched;return(0,m.jsxs)(l.default,{style:Q.body,children:[(0,m.jsxs)(l.default,{style:Q.inputGroup,children:[(0,m.jsx)(u.default,{style:Q.label,children:"Orden de trabajo"}),(0,m.jsx)(E.default,{style:[Q.input,s.ordenTrabajo&&i.ordenTrabajo&&Q.inputError],onChangeText:t("ordenTrabajo"),onBlur:o("ordenTrabajo"),value:n.ordenTrabajo}),s.ordenTrabajo&&i.ordenTrabajo&&(0,m.jsx)(u.default,{style:Q.errorText,children:i.ordenTrabajo})]}),(0,m.jsxs)(l.default,{style:Q.inputGroup,children:[(0,m.jsx)(u.default,{style:Q.label,children:"Orden de suministro"}),(0,m.jsx)(E.default,{style:[Q.input,s.ordenSuministro&&i.ordenSuministro&&Q.inputError],onChangeText:t("ordenSuministro"),onBlur:o("ordenSuministro"),value:n.ordenSuministro}),s.ordenSuministro&&i.ordenSuministro&&(0,m.jsx)(u.default,{style:Q.errorText,children:i.ordenSuministro})]}),(0,m.jsxs)(l.default,{style:Q.inputGroup,children:[(0,m.jsx)(u.default,{style:Q.label,children:"Orden de concentraci\xf3n"}),(0,m.jsx)(E.default,{style:[Q.input,s.ordenConcentracion&&i.ordenConcentracion&&Q.inputError],onChangeText:t("ordenConcentracion"),onBlur:o("ordenConcentracion"),value:n.ordenConcentracion}),s.ordenConcentracion&&i.ordenConcentracion&&(0,m.jsx)(u.default,{style:Q.errorText,children:i.ordenConcentracion})]}),(0,m.jsxs)(l.default,{style:Q.inputGroup,children:[(0,m.jsx)(u.default,{style:Q.label,children:"Solicitud de componente"}),(0,m.jsx)(E.default,{style:[Q.input,s.solicitudComponente&&i.solicitudComponente&&Q.inputError],onChangeText:t("solicitudComponente"),onBlur:o("solicitudComponente"),value:n.solicitudComponente}),s.solicitudComponente&&i.solicitudComponente&&(0,m.jsx)(u.default,{style:Q.errorText,children:i.solicitudComponente})]}),(0,m.jsx)(L,{title:"Categor\xeda",onSelect:function(e){console.log("Categor\xeda seleccionada:",e),a("categoria",e)}}),s.categoria&&i.categoria&&(0,m.jsx)(u.default,{style:Q.errorText,children:i.categoria}),(0,m.jsx)(l.default,{style:Q.buttonContainer,children:(0,m.jsx)(h,{title:"Continuar",onPress:function(){console.log("Valores del formulario antes de enviar:",n),r()}})})]})}})})};var te=o(484),oe=B.object().shape({grado:B.string().required("El grado es requerido"),nombre:B.string().required("El nombre es requerido"),matricula:B.string().required("La matr\xedcula es requerida")}),re=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},formContainer:{width:"100%"},inputGroup:{marginBottom:15,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,borderRadius:4,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:5},signatureSection:{width:"100%",marginBottom:20},signaturePreview:{alignItems:"center",marginTop:10},signatureImage:{width:"100%",height:200,marginBottom:10,borderWidth:1,borderColor:"gray",borderRadius:4},buttonContainer:{width:"100%",marginTop:20}});const ne=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),o=(0,n.useState)(null),r=(0,d.default)(o,2),a=r[0],i=r[1],f=(0,n.useState)(null),g=(0,d.default)(f,2),p=g[0],x=g[1],y=(0,n.useState)(null),j=(0,d.default)(y,2),v=j[0],C=j[1],T=(0,n.useState)(null),w=(0,d.default)(T,2),B=w[0],P=w[1],I=(0,n.useState)({grado:"",nombre:"",matricula:""}),D=(0,d.default)(I,2),F=D[0],A=D[1];(0,n.useEffect)((function(){var e,o;console.log("=== SignatureIssuing - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),console.log("Estado original actual:",B),null!=(e=t.state)&&e.bitacoraId&&(console.log("BitacoraId recibido:",t.state.bitacoraId),x(t.state.bitacoraId)),null!=(o=t.state)&&o.signature&&(console.log("Firma recuperada del estado"),i(t.state.signature)),!B&&t.state&&(console.log("Guardando estado original"),P(t.state),t.state.formData?(console.log("Inicializando valores del formulario desde formData"),A(t.state.formData)):(t.state.grado||t.state.nombre||t.state.matricula)&&(console.log("Inicializando valores del formulario desde el estado original"),A({grado:t.state.grado||"",nombre:t.state.nombre||"",matricula:t.state.matricula||""})))}),[t.state,B]);var N=function(e){console.log("=== SignatureIssuing - handleSignatureComplete ==="),console.log("Firma recibida:",e?"Presente":"No presente"),e&&(console.log("Firma capturada:",e.substring(0,50)+"..."),i(e))},R=function(o){var r;console.log("=== SignatureIssuing - Navegando a SignaturePad ==="),console.log("Callback disponible:",null!=(r=t.state)&&r.onSignatureComplete?"S\xed":"No"),console.log("Estado original a mantener:",B),console.log("Valores del formulario a mantener:",o),e("/signature-pad",{state:{returnTo:"/signatureIssuing",bitacoraId:p,formData:o,onSignatureComplete:N}})},L=function(){var t=(0,S.default)((function*(t){if(console.log("=== SignatureIssuing - handleSubmit ==="),console.log("Valores del formulario:",t),console.log("Imagen de firma:",a?"Presente":"No presente"),console.log("BitacoraId a enviar:",p),console.log("Estado original a mantener:",B),p)if(a)try{var o=a;a.startsWith("data:image")&&(o=a.split(",")[1]);var r=yield fetch("https://bitacoraapp.onrender.com/api/bitacora/signature-issuing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grado:t.grado,nombre:t.nombre,matricula:t.matricula,firma:{data:o,type:"image/png"},bitacoraId:p})});console.log("Respuesta del servidor - Status:",r.status);var n=yield r.json();if(console.log("Respuesta del servidor - Data:",n),!r.ok)throw new Error(n.message||"Error al guardar la firma");e("/signatureDoer",{state:{bitacoraId:p}})}catch(v){console.error("Error al guardar los datos:",v),C(v.message)}else c.default.alert("Error","Por favor, capture su firma antes de continuar.");else C("No se encontr\xf3 el ID de la bit\xe1cora")}));return function(e){return t.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"Datos de quien emite la bit\xe1cora"}),body:(0,m.jsxs)(l.default,{style:re.body,children:[v&&(0,m.jsx)(u.default,{style:re.errorText,children:v}),(0,m.jsx)(O.Formik,{initialValues:F,validationSchema:oe,onSubmit:L,enableReinitialize:!0,children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values,i=e.errors,s=e.touched;return(0,m.jsxs)(l.default,{style:re.formContainer,children:[(0,m.jsxs)(l.default,{style:re.inputGroup,children:[(0,m.jsx)(u.default,{style:re.label,children:"Grado*"}),(0,m.jsx)(E.default,{style:[re.input,i.grado&&s.grado&&re.inputError],onChangeText:t("grado"),onBlur:o("grado"),value:n.grado}),i.grado&&s.grado&&(0,m.jsx)(u.default,{style:re.errorText,children:i.grado})]}),(0,m.jsxs)(l.default,{style:re.inputGroup,children:[(0,m.jsx)(u.default,{style:re.label,children:"Nombre*"}),(0,m.jsx)(E.default,{style:[re.input,i.nombre&&s.nombre&&re.inputError],onChangeText:t("nombre"),onBlur:o("nombre"),value:n.nombre}),i.nombre&&s.nombre&&(0,m.jsx)(u.default,{style:re.errorText,children:i.nombre})]}),(0,m.jsxs)(l.default,{style:re.inputGroup,children:[(0,m.jsx)(u.default,{style:re.label,children:"Matr\xedcula*"}),(0,m.jsx)(E.default,{style:[re.input,i.matricula&&s.matricula&&re.inputError],onChangeText:t("matricula"),onBlur:o("matricula"),value:n.matricula}),i.matricula&&s.matricula&&(0,m.jsx)(u.default,{style:re.errorText,children:i.matricula})]}),(0,m.jsxs)(l.default,{style:re.signatureSection,children:[(0,m.jsx)(u.default,{style:re.label,children:"Firma*"}),a?(0,m.jsxs)(l.default,{style:re.signaturePreview,children:[(0,m.jsx)(te.default,{source:{uri:a},style:re.signatureImage,resizeMode:"contain"}),(0,m.jsx)(h,{title:"Cambiar Firma",onPress:function(){return R(n)}})]}):(0,m.jsx)(h,{title:"Capturar Firma",onPress:function(){return R(n)}})]}),(0,m.jsx)(l.default,{style:re.buttonContainer,children:(0,m.jsx)(h,{title:"Guardar y Continuar",onPress:r,disabled:!a})})]})}})]})})};function ae(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function le(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(o),!0).forEach((function(t){(0,X.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ae(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var ie=B.object().shape({grado:B.string().required("El grado es requerido"),nombre:B.string().required("El nombre es requerido"),matricula:B.string().required("La matr\xedcula es requerida"),mel:B.string().required("El MEL es requerido")}),se=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},formContainer:{width:"100%"},inputGroup:{marginBottom:15,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,borderRadius:4,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:5},signatureSection:{width:"100%",marginBottom:20},signaturePreview:{alignItems:"center",marginTop:10},signatureImage:{width:"100%",height:200,marginBottom:10,borderWidth:1,borderColor:"gray",borderRadius:4},buttonContainer:{width:"100%",marginTop:20}});const de=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),o=(0,n.useState)(null),r=(0,d.default)(o,2),a=r[0],i=r[1],c=(0,n.useState)(null),f=(0,d.default)(c,2),g=f[0],p=f[1],x=(0,n.useState)(null),y=(0,d.default)(x,2),j=y[0],v=y[1],C=(0,n.useState)(null),T=(0,d.default)(C,2),w=T[0],B=T[1],P=(0,n.useState)({grado:"",nombre:"",matricula:"",mel:""}),I=(0,d.default)(P,2),D=I[0],F=I[1];(0,n.useEffect)((function(){console.log("=== SignatureDoer - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),console.log("Estado original actual:",w),console.log("=== SignatureDoer - Debug Info ==="),console.log("URL actual:",window.location.pathname),console.log("Estado del componente:",{bitacoraId:g,signatureImage:a?"Presente":"No presente",error:j,initialFormValues:D}),t.state&&(t.state.bitacoraId&&(console.log("BitacoraId recibido:",t.state.bitacoraId),p(t.state.bitacoraId)),t.state.signature&&(console.log("Firma recibida del estado"),i(t.state.signature)),t.state.formData&&(console.log("Actualizando valores del formulario desde formData"),F(t.state.formData)),w||(console.log("Guardando estado original"),B(t.state)))}),[t.state,w,g,j,D,a]);var A=function(e){console.log("=== SignatureDoer - handleSignatureComplete ==="),console.log("Firma recibida:",e?"Presente":"No presente"),e&&(console.log("Firma capturada:",e.substring(0,50)+"..."),i(e))},N=function(o){var r;console.log("=== SignatureDoer - Navegando a SignaturePad ==="),console.log("Callback disponible:",null!=(r=t.state)&&r.onSignatureComplete?"S\xed":"No"),console.log("Estado original a mantener:",w),console.log("Valores del formulario a mantener:",o),e("/signature-pad",{state:{returnTo:"/signatureDoer",bitacoraId:g,formData:o,onSignatureComplete:A}})},R=function(){var t=(0,S.default)((function*(t){if(console.log("=== SignatureDoer - handleSubmit ==="),console.log("Valores del formulario:",t),console.log("Imagen de firma:",a?"Presente":"No presente"),console.log("BitacoraId a enviar:",g),console.log("Estado original a mantener:",w),g)if(a)try{var o=yield fetch("https://bitacoraapp.onrender.com/api/bitacora/signature-doer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le(le({},t),{},{firma:{data:a,type:"image/png"},bitacoraId:g}))});console.log("Respuesta del servidor - Status:",o.status);var r=yield o.json();if(console.log("Respuesta del servidor - Data:",r),!o.ok)throw new Error(r.message||"Error al guardar la firma");console.log("=== SignatureDoer - Navegando a SignatureDelivery ==="),console.log("Estado a enviar:",le(le({},w),{},{bitacoraId:g,formData:t,signature:a})),e("/signatureDelivery",{state:{bitacoraId:g}})}catch(j){console.error("Error al guardar los datos:",j),v(j.message)}else v("La firma es requerida");else v("No se encontr\xf3 el ID de la bit\xe1cora")}));return function(e){return t.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"Datos de quien realiz\xf3 las acciones"}),body:(0,m.jsxs)(l.default,{style:se.body,children:[j&&(0,m.jsx)(u.default,{style:se.errorText,children:j}),(0,m.jsx)(O.Formik,{initialValues:D,validationSchema:ie,onSubmit:R,enableReinitialize:!0,children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values,i=e.errors,s=e.touched;return(0,m.jsxs)(l.default,{style:se.formContainer,children:[(0,m.jsxs)(l.default,{style:se.inputGroup,children:[(0,m.jsx)(u.default,{style:se.label,children:"Grado*"}),(0,m.jsx)(E.default,{style:[se.input,i.grado&&s.grado&&se.inputError],onChangeText:t("grado"),onBlur:o("grado"),value:n.grado}),i.grado&&s.grado&&(0,m.jsx)(u.default,{style:se.errorText,children:i.grado})]}),(0,m.jsxs)(l.default,{style:se.inputGroup,children:[(0,m.jsx)(u.default,{style:se.label,children:"Nombre*"}),(0,m.jsx)(E.default,{style:[se.input,i.nombre&&s.nombre&&se.inputError],onChangeText:t("nombre"),onBlur:o("nombre"),value:n.nombre}),i.nombre&&s.nombre&&(0,m.jsx)(u.default,{style:se.errorText,children:i.nombre})]}),(0,m.jsxs)(l.default,{style:se.inputGroup,children:[(0,m.jsx)(u.default,{style:se.label,children:"Matr\xedcula*"}),(0,m.jsx)(E.default,{style:[se.input,i.matricula&&s.matricula&&se.inputError],onChangeText:t("matricula"),onBlur:o("matricula"),value:n.matricula}),i.matricula&&s.matricula&&(0,m.jsx)(u.default,{style:se.errorText,children:i.matricula})]}),(0,m.jsxs)(l.default,{style:se.inputGroup,children:[(0,m.jsx)(u.default,{style:se.label,children:"MEL (Lista de Equipo m\xednimo)*"}),(0,m.jsx)(E.default,{style:[se.input,i.mel&&s.mel&&se.inputError],onChangeText:t("mel"),onBlur:o("mel"),value:n.mel}),i.mel&&s.mel&&(0,m.jsx)(u.default,{style:se.errorText,children:i.mel})]}),(0,m.jsx)(l.default,{style:se.signatureSection,children:a?(0,m.jsxs)(l.default,{style:se.signaturePreview,children:[(0,m.jsx)(te.default,{source:{uri:a},style:se.signatureImage,resizeMode:"contain"}),(0,m.jsx)(h,{title:"Cambiar Firma",onPress:function(){return N(n)}})]}):(0,m.jsx)(h,{title:"Capturar Firma",onPress:function(){return N(n)}})}),(0,m.jsx)(l.default,{style:se.buttonContainer,children:(0,m.jsx)(h,{title:"Guardar y Continuar",onPress:r,disabled:!a})})]})}})]})})};function ue(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function ce(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(o),!0).forEach((function(t){(0,X.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ue(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var fe=B.object().shape({grado:B.string().required("El grado es requerido"),nombre:B.string().required("El nombre es requerido"),matricula:B.string().required("La matr\xedcula es requerida")}),ge=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},formContainer:{width:"100%"},inputGroup:{marginBottom:15,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,borderRadius:4,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:5},signatureSection:{width:"100%",marginBottom:20},signaturePreview:{alignItems:"center",marginTop:10},signatureImage:{width:"100%",height:200,marginBottom:10,borderWidth:1,borderColor:"gray",borderRadius:4},buttonContainer:{width:"100%",marginTop:20}});const pe=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),o=(0,n.useState)(null),r=(0,d.default)(o,2),a=r[0],i=r[1],c=(0,n.useState)(null),f=(0,d.default)(c,2),g=f[0],p=f[1],x=(0,n.useState)(null),y=(0,d.default)(x,2),j=y[0],v=y[1],C=(0,n.useState)({grado:"",nombre:"",matricula:""}),T=(0,d.default)(C,2),w=T[0],B=T[1];(0,n.useEffect)((function(){console.log("=== SignatureDelivery - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),t.state&&(t.state.bitacoraId&&(console.log("BitacoraId recibido:",t.state.bitacoraId),p(t.state.bitacoraId)),t.state.signature&&(console.log("Firma recibida del estado"),i(t.state.signature)),t.state.formData&&(console.log("Actualizando valores del formulario desde formData"),B(t.state.formData)))}),[t.state]);var P=function(e){console.log("=== SignatureDelivery - handleSignatureComplete ==="),console.log("Firma recibida:",e?"Presente":"No presente"),e&&(console.log("Firma capturada:",e.substring(0,50)+"..."),i(e))},I=function(o){var r;console.log("=== SignatureDelivery - Navegando a SignaturePad ==="),console.log("Callback disponible:",null!=(r=t.state)&&r.onSignatureComplete?"S\xed":"No"),console.log("Valores del formulario a mantener:",o),e("/signature-pad",{state:{returnTo:"/signatureDelivery",bitacoraId:g,formData:o,onSignatureComplete:P}})},D=function(){var t=(0,S.default)((function*(t){if(console.log("=== SignatureDelivery - handleSubmit ==="),console.log("Valores del formulario:",t),console.log("Imagen de firma:",a?"Presente":"No presente"),console.log("BitacoraId a enviar:",g),g)if(a)try{var o=yield fetch("http://localhost:3001/api/bitacora/signature-delivery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce(ce({},t),{},{firma:{data:a,type:"image/png"},bitacoraId:g}))});console.log("Respuesta del servidor - Status:",o.status);var r=yield o.json();if(console.log("Respuesta del servidor - Data:",r),!o.ok)throw new Error(r.message||"Error al guardar la firma");console.log("=== SignatureDelivery - Navegando a Comments ==="),console.log("Estado a enviar:",{bitacoraId:g}),e("/comments",{state:{bitacoraId:g}})}catch(j){console.error("Error al guardar los datos:",j),v(j.message)}else v("La firma es requerida");else v("No se encontr\xf3 el ID de la bit\xe1cora")}));return function(e){return t.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"Datos de quien entrega aeronave"}),body:(0,m.jsxs)(l.default,{style:ge.body,children:[j&&(0,m.jsx)(u.default,{style:ge.errorText,children:j}),(0,m.jsx)(O.Formik,{initialValues:w,validationSchema:fe,onSubmit:D,enableReinitialize:!0,children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values,i=e.errors,s=e.touched;return(0,m.jsxs)(l.default,{style:ge.formContainer,children:[(0,m.jsxs)(l.default,{style:ge.inputGroup,children:[(0,m.jsx)(u.default,{style:ge.label,children:"Grado*"}),(0,m.jsx)(E.default,{style:[ge.input,i.grado&&s.grado&&ge.inputError],onChangeText:t("grado"),onBlur:o("grado"),value:n.grado}),i.grado&&s.grado&&(0,m.jsx)(u.default,{style:ge.errorText,children:i.grado})]}),(0,m.jsxs)(l.default,{style:ge.inputGroup,children:[(0,m.jsx)(u.default,{style:ge.label,children:"Nombre*"}),(0,m.jsx)(E.default,{style:[ge.input,i.nombre&&s.nombre&&ge.inputError],onChangeText:t("nombre"),onBlur:o("nombre"),value:n.nombre}),i.nombre&&s.nombre&&(0,m.jsx)(u.default,{style:ge.errorText,children:i.nombre})]}),(0,m.jsxs)(l.default,{style:ge.inputGroup,children:[(0,m.jsx)(u.default,{style:ge.label,children:"Matr\xedcula*"}),(0,m.jsx)(E.default,{style:[ge.input,i.matricula&&s.matricula&&ge.inputError],onChangeText:t("matricula"),onBlur:o("matricula"),value:n.matricula}),i.matricula&&s.matricula&&(0,m.jsx)(u.default,{style:ge.errorText,children:i.matricula})]}),(0,m.jsxs)(l.default,{style:ge.signatureSection,children:[(0,m.jsx)(u.default,{style:ge.label,children:"Firma*"}),a?(0,m.jsxs)(l.default,{style:ge.signaturePreview,children:[(0,m.jsx)(te.default,{source:{uri:a},style:ge.signatureImage,resizeMode:"contain"}),(0,m.jsx)(h,{title:"Cambiar Firma",onPress:function(){return I(n)}})]}):(0,m.jsx)(h,{title:"Capturar Firma",onPress:function(){return I(n)}})]}),(0,m.jsx)(l.default,{style:ge.buttonContainer,children:(0,m.jsx)(h,{title:"Guardar y Continuar",onPress:r,disabled:!a})})]})}})]})})};var me=o(3177),he=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",width:"100%"},canvas:{borderWidth:1,borderColor:"#ccc",borderRadius:4,backgroundColor:"#fff"},buttonContainer:{flexDirection:"row",marginTop:20,gap:10},button:{padding:8,backgroundColor:"#414BB2",borderRadius:4,minWidth:100,alignItems:"center"},buttonText:{color:"white",fontSize:16}});const be=function(e){var t=e.onSave,o=e.onClear,r=(0,n.useRef)(null),a=(0,n.useRef)(!1),i=(0,n.useRef)(0),s=(0,n.useRef)(0);(0,n.useEffect)((function(){var e=r.current,t=e.getContext("2d");t.strokeStyle="#000000",t.lineWidth=2,t.lineCap="round",t.lineJoin="round";var o=function(t){a.current=!0;var o=e.getBoundingClientRect();i.current=t.clientX-o.left,s.current=t.clientY-o.top},n=function(o){if(a.current){var r=e.getBoundingClientRect(),n=o.clientX-r.left,l=o.clientY-r.top;t.beginPath(),t.moveTo(i.current,s.current),t.lineTo(n,l),t.stroke(),i.current=n,s.current=l}},l=function(){a.current=!1},d=function(t){t.preventDefault();var o=t.touches[0],r=e.getBoundingClientRect();i.current=o.clientX-r.left,s.current=o.clientY-r.top,a.current=!0},u=function(o){if(o.preventDefault(),a.current){var r=o.touches[0],n=e.getBoundingClientRect(),l=r.clientX-n.left,d=r.clientY-n.top;t.beginPath(),t.moveTo(i.current,s.current),t.lineTo(l,d),t.stroke(),i.current=l,s.current=d}},c=function(){a.current=!1};return e.addEventListener("mousedown",o),e.addEventListener("mousemove",n),e.addEventListener("mouseup",l),e.addEventListener("touchstart",d),e.addEventListener("touchmove",u),e.addEventListener("touchend",c),function(){e.removeEventListener("mousedown",o),e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",l),e.removeEventListener("touchstart",d),e.removeEventListener("touchmove",u),e.removeEventListener("touchend",c)}}),[]);return(0,m.jsxs)(l.default,{style:he.container,children:[(0,m.jsx)("canvas",{ref:r,width:300,height:200,style:he.canvas}),(0,m.jsxs)(l.default,{style:he.buttonContainer,children:[(0,m.jsx)(p.default,{onPress:function(){var e=r.current;e.getContext("2d").clearRect(0,0,e.width,e.height),o()},style:he.button,children:(0,m.jsx)(u.default,{style:he.buttonText,children:"Limpiar"})}),(0,m.jsx)(p.default,{onPress:function(){var e=r.current.toDataURL("image/png");t(e)},style:he.button,children:(0,m.jsx)(u.default,{style:he.buttonText,children:"Guardar"})})]})]})};function xe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}var ye=a.default.create({container:{flex:1,width:"100%"},signatureContainer:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(o),!0).forEach((function(t){(0,X.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):xe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({flex:1,width:"100%",height:300,backgroundColor:"#fff",borderRadius:4},void 0),buttonContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:20,paddingHorizontal:20},clearButton:{backgroundColor:"#FF3B30"}});const je=function(e){var t=e.onSave,o=e.isWeb,r=(0,n.useRef)(null),a=function(e){console.log("=== SignaturePad - handleSave ==="),console.log("Firma guardada:",e?"Presente":"No presente"),t(e)};return o?(0,m.jsx)(be,{onSave:a}):(0,m.jsxs)(l.default,{style:ye.container,children:[(0,m.jsx)(l.default,{style:ye.signatureContainer,children:(0,m.jsx)(me.default,{ref:r,onOK:a,onEmpty:function(){return a(null)},descriptionText:"Firma",clearText:"Limpiar",confirmText:"Guardar",webStyle:"\n            .m-signature-pad--body {\n              border: 1px solid #e8e8e8;\n              border-radius: 4px;\n            }\n            .m-signature-pad--footer {\n              display: flex;\n              flex-direction: row;\n              justify-content: space-between;\n              padding: 10px;\n            }\n            .button {\n              padding: 10px 20px;\n              border-radius: 4px;\n              background-color: #007AFF;\n              color: white;\n              border: none;\n              cursor: pointer;\n            }\n            .button.clear {\n              background-color: #FF3B30;\n            }\n          ",androidStyle:"\n            .m-signature-pad--body {\n              border: 1px solid #e8e8e8;\n              border-radius: 4px;\n            }\n            .m-signature-pad--footer {\n              display: flex;\n              flex-direction: row;\n              justify-content: space-between;\n              padding: 10px;\n            }\n            .button {\n              padding: 10px 20px;\n              border-radius: 4px;\n              background-color: #007AFF;\n              color: white;\n              border: none;\n            }\n            .button.clear {\n              background-color: #FF3B30;\n            }\n          ",iosStyle:"\n            .m-signature-pad--body {\n              border: 1px solid #e8e8e8;\n              border-radius: 4px;\n            }\n            .m-signature-pad--footer {\n              display: flex;\n              flex-direction: row;\n              justify-content: space-between;\n              padding: 10px;\n            }\n            .button {\n              padding: 10px 20px;\n              border-radius: 4px;\n              background-color: #007AFF;\n              color: white;\n              border: none;\n            }\n            .button.clear {\n              background-color: #FF3B30;\n            }\n          "})}),!1]})};function ve(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Ce(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(o),!0).forEach((function(t){(0,X.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ve(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Se=a.default.create({container:{flex:1,padding:20,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:20},card:Ce({backgroundColor:"#fff",borderRadius:8,padding:15,marginBottom:20},{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.25)"}),buttonContainer:{alignItems:"center",marginTop:20}});const Te=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),o=(0,n.useState)(null),r=(0,d.default)(o,2),a=r[0],i=r[1],c=(0,n.useState)(!0),f=(0,d.default)(c,1)[0];(0,n.useEffect)((function(){console.log("=== SignaturePadPage - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),console.log("Plataforma:","web")}),[t.state]);return(0,m.jsxs)(l.default,{style:Se.container,children:[(0,m.jsx)(u.default,{style:Se.title,children:"Captura de Firma"}),(0,m.jsx)(l.default,{style:Se.card,children:(0,m.jsx)(je,{onSave:function(e){console.log("=== SignaturePadPage - handleSaveSignature ==="),console.log("Firma guardada exitosamente"),console.log("Estado de la firma:",e?"Presente":"No presente"),i(e)},isWeb:f})}),(0,m.jsx)(l.default,{style:Se.buttonContainer,children:(0,m.jsx)(h,{title:"Finalizar Firma",onPress:function(){var o,r,n,l,i;console.log("=== SignaturePadPage - handleFinish ==="),console.log("Intentando finalizar firma..."),console.log("Estado de la firma:",a?"Presente":"No presente"),console.log("Callback disponible:",null!=(o=t.state)&&o.onSignatureComplete?"S\xed":"No"),console.log("Estado completo:",t.state),a&&null!=(r=t.state)&&r.onSignatureComplete&&(console.log("Ejecutando callback con la firma..."),t.state.onSignatureComplete(a)),console.log("Navegando a la p\xe1gina anterior..."),e((null==(n=t.state)?void 0:n.returnTo)||"/",{state:Ce(Ce({},t.state),{},{signature:a,bitacoraId:null==(l=t.state)?void 0:l.bitacoraId,formData:null==(i=t.state)?void 0:i.formData})})},disabled:!a})})]})};var we=a.default.create({body:{flex:1,justifyContent:"space-between",alignItems:"center",width:"100%",height:"100%"},textareaContainer:{width:"80%",height:"70%",marginVertical:20},textarea:{width:"100%",height:"100%",borderColor:"gray",borderWidth:1,borderRadius:4,padding:10,fontSize:16,backgroundColor:"white"},buttonContainer:{width:"80%",marginTop:20,marginBottom:20}});const Ee=function(){var e=(0,s.useNavigate)(),t=((0,s.useLocation)().state||{}).bitacoraId,o=function(){var o=(0,S.default)((function*(o){try{if(!t)return void c.default.alert("Error","No se encontr\xf3 el ID de la bit\xe1cora");if(!(yield fetch(`http://localhost:3001/api/bitacora/id/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({observacionesComments:o.comments})})).ok)throw new Error("Error al actualizar los comentarios");var r=yield fetch(`http://localhost:3001/api/bitacora/${t}/export-excel`,{method:"POST"});if(!r.ok)throw new Error("Error al exportar a Excel");var n=yield r.blob(),a=window.URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`BITACORA-${t}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(a),document.body.removeChild(l),c.default.alert("\xc9xito","Bit\xe1cora exportada exitosamente"),e("/")}catch(i){console.error("Error:",i),c.default.alert("Error",i.message||"Hubo un problema al procesar la solicitud")}}));return function(e){return o.apply(this,arguments)}}();return(0,m.jsx)(k,{header:(0,m.jsx)(b,{titleName:"Observaciones y/o comentarios"}),body:(0,m.jsx)(O.Formik,{initialValues:{comments:""},onSubmit:o,children:function(e){var t=e.handleChange,o=e.handleBlur,r=e.handleSubmit,n=e.values;return(0,m.jsxs)(l.default,{style:we.body,children:[(0,m.jsx)(l.default,{style:we.textareaContainer,children:(0,m.jsx)(E.default,{style:we.textarea,onChangeText:t("comments"),onBlur:o("comments"),value:n.comments,multiline:!0,numberOfLines:20,placeholder:"Ingrese sus observaciones o comentarios aqu\xed...",textAlignVertical:"top"})}),(0,m.jsx)(l.default,{style:we.buttonContainer,children:(0,m.jsx)(h,{title:"Imprimir",onPress:r})})]})}})})};var Oe=o(7109);function Be(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Pe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(o),!0).forEach((function(t){(0,X.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Be(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Ie=a.default.create({container:{flex:1,padding:16,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},formGroup:{marginBottom:16},label:{fontSize:16,marginBottom:8,fontWeight:"500"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16},readOnlyInput:{backgroundColor:"#f5f5f5",color:"#666"},textArea:{height:100,textAlignVertical:"top"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:20},button:{padding:12,borderRadius:8,minWidth:150,alignItems:"center"},cancelButton:{backgroundColor:"#e0e0e0"},submitButton:{backgroundColor:"#3b82f6"},buttonText:{color:"#fff",fontSize:16,fontWeight:"500"},errorContainer:{backgroundColor:"#fee2e2",borderColor:"#f87171",borderWidth:1,borderRadius:8,padding:12,marginBottom:16},errorText:{color:"#dc2626",fontSize:14},successContainer:{backgroundColor:"#dcfce7",borderColor:"#4ade80",borderWidth:1,borderRadius:8,padding:12,marginBottom:16},successText:{color:"#16a34a",fontSize:14}});const De=function(){var e=(0,s.useParams)().folio,t=(0,s.useNavigate)(),o=(0,n.useState)({folio:"",fecha:"",hora:"",tipo:"",descripcion:"",correccion:""}),r=(0,d.default)(o,2),a=r[0],i=r[1],c=(0,n.useState)(""),f=(0,d.default)(c,2),g=f[0],h=f[1],b=(0,n.useState)(""),x=(0,d.default)(b,2),y=x[0],j=x[1];(0,n.useEffect)((function(){var t=function(){var t=(0,S.default)((function*(){try{var t=(yield Oe.default.get(`https://bitacoraapp.onrender.com/api/bitacoras/${e}`)).data;i({folio:t.folio,fecha:t.fecha,hora:t.hora,tipo:t.tipo,descripcion:t.descripcion,correccion:""})}catch(g){console.error("Error fetching bitacora:",g),h("Error al cargar los datos de la bit\xe1cora")}}));return function(){return t.apply(this,arguments)}}();t()}),[e]);var v=function(){var o=(0,S.default)((function*(){if(h(""),j(""),a.correccion.trim())try{yield Oe.default.patch(`https://bitacoraapp.onrender.com/api/bitacora/${e}/correcciones`,{correccion:a.correccion,usuario:"Usuario"});j("Correcci\xf3n agregada exitosamente"),setTimeout((function(){t("/")}),2e3)}catch(g){var o,r;console.error("Error submitting correction:",g),h((null==(o=g.response)||null==(r=o.data)?void 0:r.error)||"Error al guardar la correcci\xf3n")}else h("La correcci\xf3n es requerida")}));return function(){return o.apply(this,arguments)}}();return(0,m.jsxs)(A.default,{style:Ie.container,children:[(0,m.jsx)(u.default,{style:Ie.title,children:"Agregar Correcci\xf3n"}),g?(0,m.jsx)(l.default,{style:Ie.errorContainer,children:(0,m.jsx)(u.default,{style:Ie.errorText,children:g})}):null,y?(0,m.jsx)(l.default,{style:Ie.successContainer,children:(0,m.jsx)(u.default,{style:Ie.successText,children:y})}):null,(0,m.jsxs)(l.default,{style:Ie.formGroup,children:[(0,m.jsx)(u.default,{style:Ie.label,children:"Folio"}),(0,m.jsx)(E.default,{style:[Ie.input,Ie.readOnlyInput],value:a.folio,editable:!1})]}),(0,m.jsxs)(l.default,{style:Ie.formGroup,children:[(0,m.jsx)(u.default,{style:Ie.label,children:"Fecha"}),(0,m.jsx)(E.default,{style:[Ie.input,Ie.readOnlyInput],value:a.fecha,editable:!1})]}),(0,m.jsxs)(l.default,{style:Ie.formGroup,children:[(0,m.jsx)(u.default,{style:Ie.label,children:"Hora"}),(0,m.jsx)(E.default,{style:[Ie.input,Ie.readOnlyInput],value:a.hora,editable:!1})]}),(0,m.jsxs)(l.default,{style:Ie.formGroup,children:[(0,m.jsx)(u.default,{style:Ie.label,children:"Tipo"}),(0,m.jsx)(E.default,{style:[Ie.input,Ie.readOnlyInput],value:a.tipo,editable:!1})]}),(0,m.jsxs)(l.default,{style:Ie.formGroup,children:[(0,m.jsx)(u.default,{style:Ie.label,children:"Descripci\xf3n"}),(0,m.jsx)(E.default,{style:[Ie.input,Ie.readOnlyInput,Ie.textArea],value:a.descripcion,editable:!1,multiline:!0})]}),(0,m.jsxs)(l.default,{style:Ie.formGroup,children:[(0,m.jsx)(u.default,{style:Ie.label,children:"Correcci\xf3n"}),(0,m.jsx)(E.default,{style:[Ie.input,Ie.textArea],value:a.correccion,onChangeText:function(e){return t="correccion",o=e,i((function(e){return Pe(Pe({},e),{},(0,X.default)({},t,o))})),void h("");var t,o},placeholder:"Ingrese la correcci\xf3n...",multiline:!0})]}),(0,m.jsxs)(l.default,{style:Ie.buttonContainer,children:[(0,m.jsx)(p.default,{style:[Ie.button,Ie.cancelButton],onPress:function(){return t("/")},children:(0,m.jsx)(u.default,{style:Ie.buttonText,children:"Cancelar"})}),(0,m.jsx)(p.default,{style:[Ie.button,Ie.submitButton],onPress:v,children:(0,m.jsx)(u.default,{style:Ie.buttonText,children:"Guardar Correcci\xf3n"})})]})]})};var Fe=a.default.create({container:{paddingTop:40,backgroundColor:"white",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:10},titleContainer:{flex:.9,alignItems:"flex-end"},iconContainer:{flex:.1,alignItems:"flex-end",marginTop:10},title:{color:"black",fontSize:20,fontWeight:"bold"}});const Ae=function(){return(0,m.jsxs)(l.default,{style:Fe.container,children:[(0,m.jsx)(l.default,{style:Fe.iconContainer,children:(0,m.jsxs)(u.default,{children:[(0,m.jsx)(f.default,{name:"home",size:25,color:"black"})," "]})}),(0,m.jsx)(l.default,{style:Fe.titleContainer,children:(0,m.jsx)(i.Link,{to:"/",component:p.default,children:(0,m.jsx)(u.default,{style:Fe.title,children:"Bit\xe1cora App"})})})]})};const Ne=function(){return(0,m.jsxs)(i.NativeRouter,{children:[(0,m.jsx)(Ae,{}),(0,m.jsxs)(s.Routes,{children:[(0,m.jsx)(s.Route,{path:"/",element:(0,m.jsx)(w,{})}),(0,m.jsx)(s.Route,{path:"/home",element:(0,m.jsx)(C,{})}),(0,m.jsx)(s.Route,{path:"/newBitacora",element:(0,m.jsx)(D,{})}),(0,m.jsx)(s.Route,{path:"/InfoFlight",element:(0,m.jsx)(G,{})}),(0,m.jsx)(s.Route,{path:"/InfoFlightPt2",element:(0,m.jsx)($,{})}),(0,m.jsx)(s.Route,{path:"/InfoFlightComponents",element:(0,m.jsx)(Y,{})}),(0,m.jsx)(s.Route,{path:"/InfoFlightOrders",element:(0,m.jsx)(ee,{})}),(0,m.jsx)(s.Route,{path:"/signatureIssuing",element:(0,m.jsx)(ne,{})}),(0,m.jsx)(s.Route,{path:"/signatureDoer",element:(0,m.jsx)(de,{})}),(0,m.jsx)(s.Route,{path:"/signatureDelivery",element:(0,m.jsx)(pe,{})}),(0,m.jsx)(s.Route,{path:"/signature-pad",element:(0,m.jsx)(Te,{})}),(0,m.jsx)(s.Route,{path:"/comments",element:(0,m.jsx)(Ee,{})}),(0,m.jsx)(s.Route,{path:"/correccion/:folio",element:(0,m.jsx)(De,{})})]})]})};function ke(){return(0,m.jsxs)(l.default,{style:Re.container,children:[(0,m.jsx)(Ne,{}),(0,m.jsx)(r.StatusBar,{style:"auto"})]})}var Re=a.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.m=e,(()=>{var e=[];o.O=(t,r,n,a)=>{if(!r){var l=1/0;for(u=0;u<e.length;u++){for(var[r,n,a]=e[u],i=!0,s=0;s<r.length;s++)(!1&a||l>=a)&&Object.keys(o.O).every((e=>o.O[e](r[s])))?r.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,n,a]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var a=Object.create(null);o.r(a);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&r;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>l[e]=()=>r[e]));return l.default=()=>r,o.d(a,l),a}})(),o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/BITACORAAPP/",(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[l,i,s]=r,d=0;if(l.some((t=>0!==e[t]))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(s)var u=s(o)}for(t&&t(r);d<l.length;d++)a=l[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=o.O(void 0,[683],(()=>o(5036)));r=o.O(r)})();
//# sourceMappingURL=main.ed8533c5.js.map