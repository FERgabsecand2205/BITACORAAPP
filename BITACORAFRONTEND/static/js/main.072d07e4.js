(()=>{"use strict";var e={1575:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Me});var o=r(7225),n=r(6665),a=r(3668),l=r(3929),i=r(2190),s=r(3986),d=r(296),u=r(6283),c=r(1690),f=r(2852),g=a.default.create({container:{flex:1,justifyContent:"center",padding:16},titleLogIn:{fontSize:20,fontWeight:"bold",textAlign:"center",color:"black",paddingBlock:10},titleHeader:{color:"black",fontSize:20,fontWeight:"bold",paddingVertical:12},containerheader:{justifyContent:"center",width:"100%",alignItems:"center",paddingVertical:12},separator:{height:1,backgroundColor:"black",width:"100%",marginTop:12},input:{borderColor:"black",borderWidth:1,borderRadius:5,padding:10,marginBottom:10},recoveryText:{color:"blue",textAlign:"left",marginTop:16},privacyText:{color:"blue",textAlign:"left",marginTop:16},button:{backgroundColor:"#414BB2",padding:10,borderRadius:5,alignItems:"center",marginTop:16,width:"100%"},buttonText:{color:"white",fontWeight:"bold"},secondaryButton:{backgroundColor:"transparent",borderColor:"#414BB2",borderWidth:1,padding:10,borderRadius:5,alignItems:"center",marginTop:16,width:"100%"},secondaryButtonText:{color:"#414BB2",fontWeight:"bold"},appBar:{flexDirection:"row",justifyContent:"space-around",padding:5,backgroundColor:"#414BB2",marginTop:10},appBarText:{color:"white",fontWeight:"bold"}}),m=r(5648),h=r(397);const p=function(e){var t=e.title,r=e.onPress,o=e.type,n=void 0===o?"primary":o,a="primary"===n?g.button:g.secondaryButton,l="primary"===n?g.buttonText:g.secondaryButtonText;return(0,h.jsx)(m.default,{style:a,onPress:r,children:(0,h.jsx)(u.default,{style:l,children:t})})};const b=function(e){var t=e.titleName;return(0,h.jsxs)(l.default,{style:g.containerheader,children:[(0,h.jsx)(u.default,{style:g.titleHeader,children:t}),(0,h.jsx)(l.default,{style:g.separator})]})};var x=a.default.create({containerPage:{flex:1,backgroundColor:"white",width:"100%"},headerContainer:{minHeight:50,width:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"white",paddingTop:12},contentBody:{flex:1,marginTop:5,marginBottom:5,padding:20,width:"100%"},body:{flex:1,justifyContent:"center",alignItems:"center"},footer:{marginTop:20,flex:.1,justifyContent:"center",alignItems:"center"},buttonContainer:{justifyContent:"center",alignItems:"center",padding:20}});const y=function(e){var t=e.header,r=e.body,o=e.buttons,n=e.footer;return(0,h.jsxs)(l.default,{style:x.containerPage,children:[(0,h.jsx)(l.default,{style:x.headerContainer,children:t}),(0,h.jsx)(l.default,{style:x.contentBody,children:(0,h.jsx)(l.default,{style:x.body,children:r})}),(0,h.jsx)(l.default,{style:x.buttonContainer,children:o}),(0,h.jsx)(l.default,{style:x.footer,children:n})]})};var j=function(e){var t=e.iconColor,r=e.bitacoraName,o=e.bitacoraState,a=e.bitacoraHours,i=function(e){var t=e.split(":").map(Number),r=(0,d.default)(t,3);return 3600*r[0]+60*r[1]+r[2]}(a),s=t||(i<=288e3?"green":i<=324e3?"orange":"red");return(0,n.useEffect)((function(){i>324e3&&c.default.alert("Advertencia","Se aproxima el mantenimiento de 100 Hrs de vuelo de esta aeronave",[{text:"OK",onPress:function(){return console.log("OK Pressed")}}])}),[i]),(0,h.jsxs)(l.default,{style:v.bitacoraContainer,children:[(0,h.jsx)(f.default,{name:"document",size:50,color:s,style:v.marginDocument}),(0,h.jsxs)(l.default,{style:v.bitacoraTextContainer,children:[(0,h.jsx)(u.default,{style:v.bitacoraTextTitle,children:r}),(0,h.jsxs)(u.default,{style:v.bitacoraText,children:["Estado: ",o]}),(0,h.jsxs)(u.default,{style:v.bitacoraText,children:["Hrs: ",a]})]})]})},v=a.default.create({bitacoraTextTitle:{fontSize:20,fontWeight:"bold"},bitacoraContainer:{flexDirection:"row",alignItems:"center",marginVertical:5},bitacoraTextContainer:{flex:1},bitacoraText:{fontSize:14,marginVertical:5},marginDocument:{marginRight:"10%",marginLeft:"5%"},bodyContent:{flex:.7,justifyContent:"center",alignItems:"center"},footer:{marginTop:20,flex:.1,justifyContent:"center",alignItems:"center"}});const C=function(){var e=(0,s.useNavigate)();return(0,h.jsx)(y,{header:(0,h.jsx)(b,{titleName:"Bit\xe1cora de Aeronaves"}),body:(0,h.jsxs)(l.default,{style:v.bodyContent,children:[(0,h.jsx)(j,{bitacoraName:"Bell 412 Mat.1213",bitacoraState:"Operativo",bitacoraHours:"64:25:42"}),(0,h.jsx)(j,{bitacoraName:"Bell 412 Mat.1122",bitacoraState:"En mantenimiento",bitacoraHours:"75:25:56"}),(0,h.jsx)(j,{bitacoraName:"Bell 412 Mat.1625",bitacoraState:"Sin novedad",bitacoraHours:"80:52:42"}),(0,h.jsx)(j,{bitacoraName:"Bell 412 Mat.1017",bitacoraState:"Sin novedad",bitacoraHours:"85:25:50"})]}),buttons:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p,{title:"Comenzar Nueva Bit\xe1cora",onPress:function(){e("/newBitacora")}}),(0,h.jsx)(p,{title:"Administrar Todas las Actividades",onPress:function(){e("/adminallactivities")}})]}),footer:(0,h.jsx)(l.default,{style:v.footer})})};var S=r(467),T=a.default.create({centered:{alignItems:"center",justifyContent:"center"},title:{fontSize:32,marginBottom:10}});const w=function(){var e=(0,s.useNavigate)(),t=function(){var e=(0,S.default)((function*(){try{if(console.log("=== Verificando estado del servidor ==="),(yield fetch("http://localhost:3001/api/bitacoras")).ok)return console.log("\u2705 Servidor funcionando correctamente"),!0}catch(e){return console.log("\u274c Servidor no est\xe1 funcionando"),console.log("=== Instrucciones para iniciar el servidor ==="),console.log("1. Abre una terminal nueva"),console.log("2. Navega al directorio del backend:"),console.log("   cd BITACORABACKEND"),console.log("3. Inicia el servidor:"),console.log("   node src/server.js"),console.log('4. Espera a ver el mensaje: "Servidor corriendo en http://localhost:3001"'),!1}}));return function(){return e.apply(this,arguments)}}(),r=function(){var r=(0,S.default)((function*(){(yield t())?e("/newBitacora"):c.default.alert("Servidor no disponible","El servidor backend no est\xe1 funcionando. Por favor, inicia el servidor antes de continuar.",[{text:"Entendido",style:"cancel"}])}));return function(){return r.apply(this,arguments)}}();return(0,h.jsx)(y,{header:(0,h.jsx)(b,{titleName:"Bienvenido"}),body:(0,h.jsxs)(l.default,{style:T.centered,children:[(0,h.jsx)(u.default,{style:T.title,children:"Bit\xe1cora App"}),(0,h.jsx)(f.default,{name:"airplane",size:50,color:"black"})]}),buttons:(0,h.jsx)(p,{title:"Iniciar",onPress:r}),footer:(0,h.jsx)(l.default,{children:(0,h.jsx)(u.default,{})})})};var O=r(6773),E=r(5410),P=r(9201),I=P.object().shape({tipoAeronave:P.string().required("El tipo de aeronave es requerido").min(2,"El tipo de aeronave debe tener al menos 2 caracteres"),matricula:P.string().required("La matr\xedcula es requerida").matches(/^[A-Z0-9-]+$/,"La matr\xedcula solo debe contener letras may\xfasculas, n\xfameros y guiones"),organismo:P.string().required("El organismo es requerido").min(2,"El organismo debe tener al menos 2 caracteres"),folio:P.string().required("El folio es requerido").matches(/^\d{4}-\d{3}$/,"El folio debe tener el formato YYYY-XXX (ejemplo: 2024-001)")}),B=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:2},buttonText:{color:"white"}});const D=function(){var e=(0,s.useNavigate)(),t=function(){var t=(0,S.default)((function*(t){try{console.log("=== NewBitacora - Intentando crear bit\xe1cora ==="),console.log("Datos a enviar:",t);var r=yield fetch("http://localhost:3001/api/bitacora",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){var o=yield r.json();if("Ya existe una bit\xe1cora con este folio"===o.error)return void c.default.alert("Folio duplicado","El folio que intentas usar ya existe. Por favor, usa un folio diferente.",[{text:"Entendido",style:"cancel"}]);throw new Error(o.error||"Error al guardar los datos")}var n=yield r.json();console.log("=== NewBitacora - Bit\xe1cora creada exitosamente ==="),console.log("ID recibido del backend:",n._id),console.log("Folio:",t.folio),c.default.alert("\xc9xito","Bit\xe1cora creada exitosamente"),e("/InfoFlight",{state:{folio:t.folio,bitacoraId:n._id}}),console.log("=== NewBitacora - Despu\xe9s de navegar ==="),console.log("Estado de navegaci\xf3n enviado:",{folio:t.folio,bitacoraId:n._id})}catch(a){console.error("Error completo:",a),c.default.alert("Error",a.message||"Hubo un problema al guardar los datos")}}));return function(e){return t.apply(this,arguments)}}();return(0,h.jsx)(y,{header:(0,h.jsx)(b,{titleName:"Nueva Bit\xe1cora"}),body:(0,h.jsx)(E.Formik,{initialValues:{tipoAeronave:"",matricula:"",organismo:"",folio:""},validationSchema:I,onSubmit:t,children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.handleSubmit,n=e.values,a=e.errors,i=e.touched;return(0,h.jsxs)(l.default,{style:B.body,children:[(0,h.jsxs)(l.default,{style:B.inputGroup,children:[(0,h.jsx)(u.default,{style:B.label,children:"Tipo de Aeronave"}),(0,h.jsx)(O.default,{style:[B.input,i.tipoAeronave&&a.tipoAeronave&&B.inputError],onChangeText:t("tipoAeronave"),onBlur:r("tipoAeronave"),value:n.tipoAeronave,placeholder:"Ej: Bell 412"}),i.tipoAeronave&&a.tipoAeronave&&(0,h.jsx)(u.default,{style:B.errorText,children:a.tipoAeronave})]}),(0,h.jsxs)(l.default,{style:B.inputGroup,children:[(0,h.jsx)(u.default,{style:B.label,children:"Matr\xedcula"}),(0,h.jsx)(O.default,{style:[B.input,i.matricula&&a.matricula&&B.inputError],onChangeText:t("matricula"),onBlur:r("matricula"),value:n.matricula,placeholder:"Ej: 1213"}),i.matricula&&a.matricula&&(0,h.jsx)(u.default,{style:B.errorText,children:a.matricula})]}),(0,h.jsxs)(l.default,{style:B.inputGroup,children:[(0,h.jsx)(u.default,{style:B.label,children:"Organismo"}),(0,h.jsx)(O.default,{style:[B.input,i.organismo&&a.organismo&&B.inputError],onChangeText:t("organismo"),onBlur:r("organismo"),value:n.organismo,placeholder:"Ej: SEDENA"}),i.organismo&&a.organismo&&(0,h.jsx)(u.default,{style:B.errorText,children:a.organismo})]}),(0,h.jsxs)(l.default,{style:B.inputGroup,children:[(0,h.jsx)(u.default,{style:B.label,children:"Folio"}),(0,h.jsx)(O.default,{style:[B.input,i.folio&&a.folio&&B.inputError],onChangeText:t("folio"),onBlur:r("folio"),value:n.folio,placeholder:"Ej: 2024-001"}),i.folio&&a.folio&&(0,h.jsx)(u.default,{style:B.errorText,children:a.folio})]}),(0,h.jsx)(p,{title:(0,h.jsx)(u.default,{style:B.buttonText,children:"Continuar"}),onPress:o})]})}}),footer:(0,h.jsx)(l.default,{children:(0,h.jsx)(u.default,{})})})};var F=r(4467),A=r(4307),N=a.default.create({containerPage:{flex:1,backgroundColor:"white",width:"100%"},headerContainer:{minHeight:50,width:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"white",paddingTop:12},contentBody:{flex:1,marginTop:5,marginBottom:5,padding:20,width:"100%"},body:{flex:1,justifyContent:"center",alignItems:"center"},footer:{marginTop:20,flex:.1,justifyContent:"center",alignItems:"center"},buttonContainer:{justifyContent:"center",alignItems:"center",padding:20}});const k=function(e){var t=e.header,r=e.body,o=e.buttons,n=e.footer;return(0,h.jsxs)(l.default,{style:N.containerPage,children:[(0,h.jsx)(l.default,{style:N.headerContainer,children:t}),(0,h.jsx)(A.default,{style:N.contentBody,children:(0,h.jsx)(l.default,{style:N.body,children:r})}),(0,h.jsx)(l.default,{style:N.buttonContainer,children:o}),(0,h.jsx)(l.default,{style:N.footer,children:n})]})};var q=a.default.create({container:{width:"100%",marginBottom:10},label:{textAlign:"left",marginBottom:5},buttonGroup:{flexDirection:"row",justifyContent:"space-between",width:"100%"},button:{flex:1,backgroundColor:"white",padding:10,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"gray",marginHorizontal:2},selectedButton:{backgroundColor:"black"},buttonText:{color:"black"},selectedButtonText:{color:"white"}});const L=function(e){var t=e.onSelect,r=e.title,o=(0,n.useState)(null),a=(0,d.default)(o,2),i=a[0],s=a[1];return(0,h.jsxs)(l.default,{style:q.container,children:[(0,h.jsx)(u.default,{style:q.label,children:r}),(0,h.jsx)(l.default,{style:q.buttonGroup,children:["A","B","C","D"].map((function(e){return(0,h.jsx)(m.default,{style:[q.button,i===e&&q.selectedButton],onPress:function(){return function(e){s(e),t&&t(e)}(e)},children:(0,h.jsx)(u.default,{style:[q.buttonText,i===e&&q.selectedButtonText],children:e})},e)}))})]})};var R=r(2098),z=(r(7239),a.default.create({container:{width:"100%"},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:5},webDatePicker:{width:"100%",height:40,borderColor:"gray",borderWidth:1,borderRadius:4,padding:8},webDatePickerWrapper:{width:"100%"}}));const G=function(e){var t=e.value,r=e.onChange,o=e.error,a=e.touched,i=(0,n.useState)(t?new Date(t):new Date),s=(0,d.default)(i,2),c=s[0],f=s[1];return(0,h.jsxs)(l.default,{style:z.container,children:[(0,h.jsx)(R.default,{selected:c,onChange:function(e){if(f(e),e){var t=e.toISOString().split("T")[0];r(t)}},dateFormat:"yyyy-MM-dd",className:z.webDatePicker,wrapperClassName:z.webDatePickerWrapper}),o&&a&&(0,h.jsx)(u.default,{style:z.errorText,children:o})]})};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,F.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=P.object().shape({lugarSalida:P.string().required("El lugar de salida es requerido").min(2,"El lugar de salida debe tener al menos 2 caracteres"),lugarLlegada:P.string().required("El lugar de llegada es requerido").min(2,"El lugar de llegada debe tener al menos 2 caracteres"),tipoVuelo:P.string().required("El tipo de vuelo es requerido").min(2,"El tipo de vuelo debe tener al menos 2 caracteres"),eventosTorque:P.string().required("Los eventos de torque son requeridos"),cargaAceiteMotores:P.string().required("La carga de aceite de motores es requerida").matches(/^\d+(\.\d+)?$/,"Debe ser un n\xfamero v\xe1lido"),cargaAceiteAPU:P.string().required("La carga de aceite APU es requerida").matches(/^\d+(\.\d+)?$/,"Debe ser un n\xfamero v\xe1lido"),fechaInfoFlight:P.string().required("La fecha es requerida").matches(/^\d{4}-\d{2}-\d{2}$/,"La fecha debe tener el formato YYYY-MM-DD"),categoria:P.string().required("La categor\xeda es requerida"),observaciones:P.string().max(500,"Las observaciones no pueden exceder los 500 caracteres")}),U=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},observacionesInput:{height:80,textAlignVertical:"top",paddingTop:8},buttonText:{color:"white"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:2}});const H=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),r=n.useState(new Date),o=(0,d.default)(r,1)[0];n.useEffect((function(){var e,r;console.log("=== InfoFlight - Al recibir el estado ==="),console.log("Estado recibido:",t.state),console.log("ID de la bit\xe1cora recibido:",null==(e=t.state)?void 0:e.bitacoraId),console.log("Folio recibido:",null==(r=t.state)?void 0:r.folio)}),[t.state]);var a=function(){var r=(0,S.default)((function*(r){try{var o,n=null==(o=t.state)?void 0:o.folio;if(!n)throw new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlight - Antes de actualizar ==="),console.log("Folio de la bit\xe1cora:",n),console.log("Datos a enviar:",r);var a=yield fetch(`http://localhost:3001/api/bitacora/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(W(W({},r),{},{observacionesInfoFlight:r.observaciones}))});if(console.log("Respuesta del servidor:",a.status),!a.ok){var l=yield a.json();throw new Error(l.error||"Error al actualizar los datos")}var i=yield a.json();console.log("=== InfoFlight - Despu\xe9s de actualizar ==="),console.log("Datos actualizados:",i),c.default.alert("\xc9xito","Datos de vuelo guardados exitosamente"),console.log("=== InfoFlight - Antes de navegar ==="),console.log("Estado a enviar:",{flightData:r,folio:n}),e("/InfoFlightPt2",{state:{flightData:r,folio:n}})}catch(s){console.error("Error completo:",s),c.default.alert("Error",s.message||"Hubo un problema al guardar los datos")}}));return function(e){return r.apply(this,arguments)}}();return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"Informaci\xf3n de Vuelo"}),body:(0,h.jsx)(E.Formik,{initialValues:{lugarSalida:"",lugarLlegada:"",tipoVuelo:"",eventosTorque:"",cargaAceiteMotores:"",cargaAceiteAPU:"",fechaInfoFlight:o.toISOString().split("T")[0],categoria:"",observaciones:""},validationSchema:M,onSubmit:a,children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.handleSubmit,n=e.values,a=e.setFieldValue,i=e.errors,s=e.touched;return(0,h.jsxs)(l.default,{style:U.body,children:[(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Lugar de Salida"}),(0,h.jsx)(O.default,{style:[U.input,s.lugarSalida&&i.lugarSalida&&U.inputError],onChangeText:function(e){t("lugarSalida")(e)},onBlur:r("lugarSalida"),value:n.lugarSalida}),s.lugarSalida&&i.lugarSalida&&(0,h.jsx)(u.default,{style:U.errorText,children:i.lugarSalida})]}),(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Lugar de Llegada"}),(0,h.jsx)(O.default,{style:[U.input,s.lugarLlegada&&i.lugarLlegada&&U.inputError],onChangeText:t("lugarLlegada"),onBlur:r("lugarLlegada"),value:n.lugarLlegada}),s.lugarLlegada&&i.lugarLlegada&&(0,h.jsx)(u.default,{style:U.errorText,children:i.lugarLlegada})]}),(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Tipo de Vuelo"}),(0,h.jsx)(O.default,{style:[U.input,s.tipoVuelo&&i.tipoVuelo&&U.inputError],onChangeText:t("tipoVuelo"),onBlur:r("tipoVuelo"),value:n.tipoVuelo}),s.tipoVuelo&&i.tipoVuelo&&(0,h.jsx)(u.default,{style:U.errorText,children:i.tipoVuelo})]}),(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Eventos de Torque"}),(0,h.jsx)(O.default,{style:[U.input,s.eventosTorque&&i.eventosTorque&&U.inputError],onChangeText:t("eventosTorque"),onBlur:r("eventosTorque"),value:n.eventosTorque}),s.eventosTorque&&i.eventosTorque&&(0,h.jsx)(u.default,{style:U.errorText,children:i.eventosTorque})]}),(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Carga Aceite Motores"}),(0,h.jsx)(O.default,{style:[U.input,s.cargaAceiteMotores&&i.cargaAceiteMotores&&U.inputError],onChangeText:t("cargaAceiteMotores"),onBlur:r("cargaAceiteMotores"),value:n.cargaAceiteMotores}),s.cargaAceiteMotores&&i.cargaAceiteMotores&&(0,h.jsx)(u.default,{style:U.errorText,children:i.cargaAceiteMotores})]}),(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Carga Aceite A.P.U."}),(0,h.jsx)(O.default,{style:[U.input,s.cargaAceiteAPU&&i.cargaAceiteAPU&&U.inputError],onChangeText:t("cargaAceiteAPU"),onBlur:r("cargaAceiteAPU"),value:n.cargaAceiteAPU}),s.cargaAceiteAPU&&i.cargaAceiteAPU&&(0,h.jsx)(u.default,{style:U.errorText,children:i.cargaAceiteAPU})]}),(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Fecha"}),(0,h.jsx)(G,{value:n.fechaInfoFlight,onChange:function(e){return a("fechaInfoFlight",e)},error:s.fechaInfoFlight&&i.fechaInfoFlight,touched:s.fechaInfoFlight}),s.fechaInfoFlight&&i.fechaInfoFlight&&(0,h.jsx)(u.default,{style:U.errorText,children:i.fechaInfoFlight})]}),(0,h.jsx)(L,{title:"Categoria",onSelect:function(e){console.log("Categor\xeda seleccionada:",e),a("categoria",e)},error:s.categoria&&i.categoria}),s.categoria&&i.categoria&&(0,h.jsx)(u.default,{style:U.errorText,children:i.categoria}),(0,h.jsxs)(l.default,{style:U.inputGroup,children:[(0,h.jsx)(u.default,{style:U.label,children:"Observaciones"}),(0,h.jsx)(O.default,{style:[U.input,U.observacionesInput,s.observaciones&&i.observaciones&&U.inputError],onChangeText:t("observaciones"),onBlur:r("observaciones"),value:n.observaciones,multiline:!0,numberOfLines:3}),s.observaciones&&i.observaciones&&(0,h.jsx)(u.default,{style:U.errorText,children:i.observaciones})]}),(0,h.jsx)(p,{title:(0,h.jsx)(u.default,{style:U.buttonText,children:"Continuar"}),onPress:function(){console.log("Valores del formulario antes de enviar:",n),o()}})]})}}),footer:(0,h.jsx)(l.default,{children:(0,h.jsx)(u.default,{})})})};var $=a.default.create({smallButton:{width:"48%"}});const _=function(e){var t=e.title,r=e.onPress,o=e.type,n=void 0===o?"primary":o,a=e.style,l="primary"===n?g.button:g.secondaryButton,i="primary"===n?g.buttonText:g.secondaryButtonText;return(0,h.jsx)(m.default,{style:[l,$.smallButton,a],onPress:r,children:(0,h.jsx)(u.default,{style:i,children:t})})};var Y=r(5458),J=a.default.create({container:{width:"100%",marginBottom:10},label:{textAlign:"left",marginBottom:5},inputContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%"},input:{width:"23%",height:40,borderWidth:1,borderColor:"gray",textAlign:"center",fontSize:16}});const X=function(e){var t=e.onChangeText,r=e.value,o=void 0===r?"":r,a=e.label,i=(0,n.useState)(["","","",""]),s=(0,d.default)(i,2),c=s[0],f=s[1],g=[(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null)];n.useEffect((function(){if(o){for(var e=o.split("").slice(0,4);e.length<4;)e.push("");f(e)}}),[o]);var m=function(e,r){e.length>1&&(e=e.charAt(0));var o=(0,Y.default)(c);o[r]=e,f(o);var n=o.join("");t(n),e&&r<3&&g[r+1].current.focus()};return(0,h.jsxs)(l.default,{style:J.container,children:[(0,h.jsx)(u.default,{style:J.label,children:a}),(0,h.jsx)(l.default,{style:J.inputContainer,children:c.map((function(e,t){return(0,h.jsx)(O.default,{ref:g[t],style:J.input,value:e,onChangeText:function(e){return m(e,t)},onKeyPress:function(e){return function(e,t){"Backspace"===e.nativeEvent.key&&!c[t]&&t>0&&g[t-1].current.focus()}(e,t)},maxLength:1,autoCapitalize:"characters"},t)}))})]})};var K=P.object().shape({fechaCorreccion:P.string().required("La fecha es requerida"),codigoATA:P.string().required("El c\xf3digo A.T.A. es requerido"),mmReferencia:P.string().required("La referencia del manual de mantenimiento es requerida"),observaciones:P.string()}),Z=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},subtitle:{fontSize:16,fontWeight:"bold",textAlign:"center",marginBottom:20,width:"100%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5,fontSize:14},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:2},buttonContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%",marginTop:10}});const Q=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)();n.useEffect((function(){var e,r;console.log("=== InfoFlightPt2 - Al recibir el estado ==="),console.log("Estado recibido:",t.state),console.log("Datos de vuelo recibidos:",null==(e=t.state)?void 0:e.flightData),console.log("Folio recibido:",null==(r=t.state)?void 0:r.folio)}),[t.state]);var r=function(){var r=(0,S.default)((function*(r){try{var o,n,a,l=null==(o=t.state)?void 0:o.folio;if(!l)throw new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlightPt2 - Antes de actualizar ==="),console.log("Folio de la bit\xe1cora:",l),console.log("Datos a enviar:",r);var i=yield fetch(`http://localhost:3001/api/bitacora/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({correcciones:[{fechaCorreccion:r.fechaCorreccion,codigoATA:r.codigoATA,mmReferencia:r.mmReferencia}],observacionesInfoFlightPt2:r.observaciones})});if(console.log("Respuesta del servidor:",i.status),!i.ok){var s=yield i.json();throw new Error(s.error||"Error al actualizar los datos")}var d=yield i.json();console.log("=== InfoFlightPt2 - Despu\xe9s de actualizar ==="),console.log("Datos actualizados:",d),c.default.alert("\xc9xito","Datos de mantenimiento guardados exitosamente"),console.log("=== InfoFlightPt2 - Antes de navegar ==="),console.log("Estado a enviar:",{flightData:null==(n=t.state)?void 0:n.flightData,maintenanceData:r,folio:l}),e("/InfoFlightComponents",{state:{flightData:null==(a=t.state)?void 0:a.flightData,maintenanceData:r,folio:l}})}catch(u){console.error("Error completo:",u),c.default.alert("Error",u.message||"Hubo un problema al guardar los datos")}}));return function(e){return r.apply(this,arguments)}}();return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"Correcciones/Servicios"}),body:(0,h.jsx)(E.Formik,{initialValues:{fechaCorreccion:(new Date).toISOString().split("T")[0],codigoATA:"",mmReferencia:"",observaciones:""},validationSchema:K,onSubmit:r,children:function(t){var r=t.handleChange,o=t.handleBlur,n=t.handleSubmit,a=t.values,i=t.setFieldValue,s=t.errors,d=t.touched;return(0,h.jsxs)(l.default,{style:Z.body,children:[(0,h.jsx)(u.default,{style:Z.subtitle,children:"Correcciones o Servicios de Mantenimiento"}),(0,h.jsxs)(l.default,{style:Z.inputGroup,children:[(0,h.jsx)(u.default,{style:Z.label,children:"Fecha"}),(0,h.jsx)(G,{value:a.fechaCorreccion,onChange:function(e){return i("fechaCorreccion",e)}}),d.fechaCorreccion&&s.fechaCorreccion&&(0,h.jsx)(u.default,{style:Z.errorText,children:s.fechaCorreccion})]}),(0,h.jsx)(X,{label:"C\xf3digo A.T.A. (Air Transport Association)",value:a.codigoATA,onChangeText:function(e){return i("codigoATA",e)},error:d.codigoATA&&s.codigoATA}),d.codigoATA&&s.codigoATA&&(0,h.jsx)(u.default,{style:Z.errorText,children:s.codigoATA}),(0,h.jsxs)(l.default,{style:Z.inputGroup,children:[(0,h.jsx)(u.default,{style:Z.label,children:"MM (Referencia Manual de Mantenimiento)"}),(0,h.jsx)(O.default,{style:[Z.input,d.mmReferencia&&s.mmReferencia&&Z.inputError],onChangeText:r("mmReferencia"),onBlur:o("mmReferencia"),value:a.mmReferencia}),d.mmReferencia&&s.mmReferencia&&(0,h.jsx)(u.default,{style:Z.errorText,children:s.mmReferencia})]}),(0,h.jsxs)(l.default,{style:Z.inputGroup,children:[(0,h.jsx)(u.default,{style:Z.label,children:"Observaciones"}),(0,h.jsx)(O.default,{style:Z.input,onChangeText:r("observaciones"),onBlur:o("observaciones"),value:a.observaciones})]}),(0,h.jsxs)(l.default,{style:Z.buttonContainer,children:[(0,h.jsx)(_,{title:"Previo",onPress:function(){return e("/InfoFlight")},style:{backgroundColor:"#3f51b5"}}),(0,h.jsx)(_,{title:"Continuar",onPress:n})]})]})}})})};var ee="http://localhost:3001/api",te=P.object().shape({numeroParte:P.string().required("El n\xfamero de parte es requerido"),posicion:P.string().required("La posici\xf3n es requerida"),numeroSerieOFF:P.string().required("El n\xfamero de serie OFF es requerido"),numeroSerieON:P.string().required("El n\xfamero de serie ON es requerido"),nomenclatura:P.string().required("La nomenclatura es requerida")}),re=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:2},noteContainer:{marginVertical:10,width:"100%"},noteText:{textAlign:"center",fontSize:14,color:"#666"},highlightedText:{color:"#000",fontWeight:"bold",fontSize:16},componentCounter:{textAlign:"center",marginTop:5,color:"#3f51b5",fontWeight:"bold"},savedComponentsText:{textAlign:"center",marginTop:5,color:"#4CAF50",fontSize:12},buttonContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%",marginTop:10}});const oe=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),r=(0,n.useState)(1),o=(0,d.default)(r,2),a=o[0],i=o[1],f=(0,n.useState)([]),g=(0,d.default)(f,2),m=g[0],p=g[1];(0,n.useEffect)((function(){var e,r;console.log("=== InfoFlightComponents - Estado inicial ==="),console.log("Estado completo recibido:",t.state),null!=(e=t.state)&&e.componentCount&&i(t.state.componentCount),null!=(r=t.state)&&r.components&&p(t.state.components)}),[t.state]);var x=function(){var r=(0,S.default)((function*(r){try{var o,n,a;console.log("=== InfoFlightComponents - Continuando con el \xfaltimo componente ==="),console.log("Valores del \xfaltimo componente:",r);var l=[].concat((0,Y.default)(m),[r]);if(console.log("Todos los componentes guardados:",l),0===l.length)throw new Error("Debe agregar al menos un componente");var i=null==(o=t.state)?void 0:o.folio;if(console.log("Folio obtenido del estado:",i),!i)throw console.error("Estado actual:",t.state),new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlightComponents - Enviando datos al servidor ==="),console.log("URL:",`${ee}/bitacora/${i}`),console.log("Datos a enviar:",{componentes:l});var s=yield fetch(`${ee}/bitacora/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentes:l})});if(!s.ok){var d=yield s.json();throw console.error("Error del servidor:",d),new Error(d.message||"Error al actualizar los componentes")}var u=yield s.json();console.log("Respuesta del servidor:",u);var f={componentData:l,folio:i,flightData:null==(n=t.state)?void 0:n.flightData,maintenanceData:null==(a=t.state)?void 0:a.maintenanceData};console.log("Estado a enviar a la siguiente p\xe1gina:",f),e("/InfoFlightOrders",{state:f})}catch(g){console.error("Error en handleContinue:",g),c.default.alert("Error",g.message||"Hubo un error al guardar los componentes. Por favor, intente nuevamente.")}}));return function(e){return r.apply(this,arguments)}}(),y=function(r,o){console.log("=== InfoFlightComponents - Enviando formulario ==="),console.log("Valores del formulario actual:",r),console.log("Contador de componentes:",a),console.log("Acci\xf3n seleccionada:",o),"create"===o?function(r){if(a<3){var o,n,l;if(console.log(`=== InfoFlightComponents - Creando componente ${a} ===`),console.log("Valores del componente:",r),m.length>=2)return void c.default.alert("Error","No se pueden agregar m\xe1s de 3 componentes");var i=[].concat((0,Y.default)(m),[r]);console.log("Lista actualizada de componentes:",i);var s={components:i,componentCount:a+1,folio:null==(o=t.state)?void 0:o.folio,flightData:null==(n=t.state)?void 0:n.flightData,maintenanceData:null==(l=t.state)?void 0:l.maintenanceData};console.log("Nuevo estado a enviar:",s),e("/InfoFlightComponents",{state:s,replace:!0})}}(r):x(r)};return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"Componentes involucrados"}),body:(0,h.jsx)(E.Formik,{initialValues:{numeroParte:"",posicion:"",numeroSerieOFF:"",numeroSerieON:"",nomenclatura:""},validationSchema:te,onSubmit:function(e,t){(0,t.setSubmitting)(!1)},children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.values,n=e.errors,i=e.touched;return(0,h.jsxs)(l.default,{style:re.body,children:[(0,h.jsxs)(l.default,{style:re.inputGroup,children:[(0,h.jsx)(u.default,{style:re.label,children:"N/P (Numero de partes del componente afectado)"}),(0,h.jsx)(O.default,{style:[re.input,i.numeroParte&&n.numeroParte&&re.inputError],onChangeText:t("numeroParte"),onBlur:r("numeroParte"),value:o.numeroParte}),i.numeroParte&&n.numeroParte&&(0,h.jsx)(u.default,{style:re.errorText,children:n.numeroParte})]}),(0,h.jsxs)(l.default,{style:re.inputGroup,children:[(0,h.jsx)(u.default,{style:re.label,children:"POS (Posici\xf3n del componente afectado)"}),(0,h.jsx)(O.default,{style:[re.input,i.posicion&&n.posicion&&re.inputError],onChangeText:t("posicion"),onBlur:r("posicion"),value:o.posicion}),i.posicion&&n.posicion&&(0,h.jsx)(u.default,{style:re.errorText,children:n.posicion})]}),(0,h.jsxs)(l.default,{style:re.inputGroup,children:[(0,h.jsx)(u.default,{style:re.label,children:"N/S OFF (Numero de serie del componente afectado)"}),(0,h.jsx)(O.default,{style:[re.input,i.numeroSerieOFF&&n.numeroSerieOFF&&re.inputError],onChangeText:t("numeroSerieOFF"),onBlur:r("numeroSerieOFF"),value:o.numeroSerieOFF}),i.numeroSerieOFF&&n.numeroSerieOFF&&(0,h.jsx)(u.default,{style:re.errorText,children:n.numeroSerieOFF})]}),(0,h.jsxs)(l.default,{style:re.inputGroup,children:[(0,h.jsx)(u.default,{style:re.label,children:"N/S ON (Numero de serie del componente instalado)"}),(0,h.jsx)(O.default,{style:[re.input,i.numeroSerieON&&n.numeroSerieON&&re.inputError],onChangeText:t("numeroSerieON"),onBlur:r("numeroSerieON"),value:o.numeroSerieON}),i.numeroSerieON&&n.numeroSerieON&&(0,h.jsx)(u.default,{style:re.errorText,children:n.numeroSerieON})]}),(0,h.jsxs)(l.default,{style:re.inputGroup,children:[(0,h.jsx)(u.default,{style:re.label,children:"Nomenclatura"}),(0,h.jsx)(O.default,{style:[re.input,i.nomenclatura&&n.nomenclatura&&re.inputError],onChangeText:t("nomenclatura"),onBlur:r("nomenclatura"),value:o.nomenclatura}),i.nomenclatura&&n.nomenclatura&&(0,h.jsx)(u.default,{style:re.errorText,children:n.nomenclatura})]}),(0,h.jsxs)(l.default,{style:re.noteContainer,children:[(0,h.jsxs)(u.default,{style:re.noteText,children:["En caso de ser mas de un componente, se debe repetir el formulario dando click en el bot\xf3n ",(0,h.jsx)(u.default,{style:re.highlightedText,children:"Crear"})," para crear un nuevo componente"]}),(0,h.jsxs)(u.default,{style:re.componentCounter,children:["Componente ",a," de 3"]}),a>1&&(0,h.jsxs)(u.default,{style:re.savedComponentsText,children:["Componentes guardados: ",m.length]})]}),(0,h.jsxs)(l.default,{style:re.buttonContainer,children:[a<3&&(0,h.jsx)(_,{title:"Crear",onPress:function(){return y(o,"create")},style:{backgroundColor:"#3f51b5"}}),(0,h.jsx)(_,{title:"Continuar",onPress:function(){return y(o,"continue")},style:{backgroundColor:"#4CAF50"}})]})]})}})})};function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){(0,F.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le=P.object().shape({ordenTrabajo:P.string().required("La orden de trabajo es requerida"),ordenSuministro:P.string().required("La orden de suministro es requerida"),ordenConcentracion:P.string().required("La orden de concentraci\xf3n es requerida"),solicitudComponente:P.string().required("La solicitud de componente es requerida"),categoriaInfoFlightOrders:P.string().required("La categor\xeda es requerida")}),ie=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},inputGroup:{marginBottom:10,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:2},buttonContainer:{width:"100%",marginTop:20}});const se=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)();n.useEffect((function(){var e,r,o,n;console.log("=== InfoFlightOrders - Estado inicial ==="),console.log("Estado completo recibido:",t.state),console.log("Folio recibido:",null==(e=t.state)?void 0:e.folio),console.log("Datos de componentes:",null==(r=t.state)?void 0:r.componentData),console.log("Datos de vuelo:",null==(o=t.state)?void 0:o.flightData),console.log("Datos de mantenimiento:",null==(n=t.state)?void 0:n.maintenanceData)}),[t.state]);var r=function(){var r=(0,S.default)((function*(r){try{var o,n,a=null==(o=t.state)?void 0:o.folio;if(!a)throw console.error("Error: No se encontr\xf3 el folio en el estado:",t.state),new Error("No se encontr\xf3 el folio de la bit\xe1cora");console.log("=== InfoFlightOrders - Antes de actualizar ==="),console.log("Folio de la bit\xe1cora:",a),console.log("Datos a enviar:",r),console.log("Estado actual completo:",t.state);var l=yield fetch(`http://localhost:3001/api/bitacora/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ordenTrabajo:r.ordenTrabajo,ordenSuministro:r.ordenSuministro,ordenConcentracion:r.ordenConcentracion,solicitudComponente:r.solicitudComponente,categoriaInfoFlightOrders:r.categoriaInfoFlightOrders})});if(!l.ok){var i=yield l.json();throw console.error("Error del servidor:",i),new Error("Error al actualizar los datos de \xf3rdenes")}var s=yield l.json();console.log("=== InfoFlightOrders - Despu\xe9s de actualizar ==="),console.log("Respuesta completa del servidor:",s),console.log("Datos de la bit\xe1cora actualizados:",s.bitacora);var d={ordenTrabajo:s.bitacora.ordenTrabajo,ordenSuministro:s.bitacora.ordenSuministro,ordenConcentracion:s.bitacora.ordenConcentracion,solicitudComponente:s.bitacora.solicitudComponente,categoria:s.bitacora.categoria};console.log("Campos actualizados en la base de datos:",d);var u=ae(ae({},t.state),{},{ordersData:r,bitacoraId:s.bitacora._id,formData:ae(ae({},null==(n=t.state)?void 0:n.formData),{},{ordersData:r})});console.log("=== InfoFlightOrders - Estado final ==="),console.log("Estado a enviar a la siguiente p\xe1gina:",u),console.log("BitacoraId a enviar:",s.bitacora._id),e("/signatureIssuing",{state:u})}catch(f){console.error("Error en handleSubmit:",f),c.default.alert("Error",f.message||"Hubo un error al guardar los datos de \xf3rdenes. Por favor, intente nuevamente.")}}));return function(e){return r.apply(this,arguments)}}();return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"\xd3rdenes y Solicitudes"}),body:(0,h.jsx)(E.Formik,{initialValues:{ordenTrabajo:"",ordenSuministro:"",ordenConcentracion:"",solicitudComponente:"",categoriaInfoFlightOrders:""},validationSchema:le,onSubmit:r,children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.handleSubmit,n=e.values,a=e.setFieldValue,i=e.errors,s=e.touched;return(0,h.jsxs)(l.default,{style:ie.body,children:[(0,h.jsxs)(l.default,{style:ie.inputGroup,children:[(0,h.jsx)(u.default,{style:ie.label,children:"Orden de trabajo"}),(0,h.jsx)(O.default,{style:[ie.input,s.ordenTrabajo&&i.ordenTrabajo&&ie.inputError],onChangeText:t("ordenTrabajo"),onBlur:r("ordenTrabajo"),value:n.ordenTrabajo}),s.ordenTrabajo&&i.ordenTrabajo&&(0,h.jsx)(u.default,{style:ie.errorText,children:i.ordenTrabajo})]}),(0,h.jsxs)(l.default,{style:ie.inputGroup,children:[(0,h.jsx)(u.default,{style:ie.label,children:"Orden de suministro"}),(0,h.jsx)(O.default,{style:[ie.input,s.ordenSuministro&&i.ordenSuministro&&ie.inputError],onChangeText:t("ordenSuministro"),onBlur:r("ordenSuministro"),value:n.ordenSuministro}),s.ordenSuministro&&i.ordenSuministro&&(0,h.jsx)(u.default,{style:ie.errorText,children:i.ordenSuministro})]}),(0,h.jsxs)(l.default,{style:ie.inputGroup,children:[(0,h.jsx)(u.default,{style:ie.label,children:"Orden de concentraci\xf3n"}),(0,h.jsx)(O.default,{style:[ie.input,s.ordenConcentracion&&i.ordenConcentracion&&ie.inputError],onChangeText:t("ordenConcentracion"),onBlur:r("ordenConcentracion"),value:n.ordenConcentracion}),s.ordenConcentracion&&i.ordenConcentracion&&(0,h.jsx)(u.default,{style:ie.errorText,children:i.ordenConcentracion})]}),(0,h.jsxs)(l.default,{style:ie.inputGroup,children:[(0,h.jsx)(u.default,{style:ie.label,children:"Solicitud de componente"}),(0,h.jsx)(O.default,{style:[ie.input,s.solicitudComponente&&i.solicitudComponente&&ie.inputError],onChangeText:t("solicitudComponente"),onBlur:r("solicitudComponente"),value:n.solicitudComponente}),s.solicitudComponente&&i.solicitudComponente&&(0,h.jsx)(u.default,{style:ie.errorText,children:i.solicitudComponente})]}),(0,h.jsx)(L,{title:"Categor\xeda",onSelect:function(e){console.log("Categor\xeda seleccionada:",e),a("categoriaInfoFlightOrders",e)}}),s.categoriaInfoFlightOrders&&i.categoriaInfoFlightOrders&&(0,h.jsx)(u.default,{style:ie.errorText,children:i.categoriaInfoFlightOrders}),(0,h.jsx)(l.default,{style:ie.buttonContainer,children:(0,h.jsx)(p,{title:"Continuar",onPress:function(){console.log("Valores del formulario antes de enviar:",n),o()}})})]})}})})};var de=r(484),ue=P.object().shape({grado:P.string().required("El grado es requerido"),nombre:P.string().required("El nombre es requerido"),matricula:P.string().required("La matr\xedcula es requerida")}),ce=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},formContainer:{width:"100%"},inputGroup:{marginBottom:15,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,borderRadius:4,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:5},signatureSection:{width:"100%",marginBottom:20},signaturePreview:{alignItems:"center",marginTop:10},signatureImage:{width:"100%",height:200,marginBottom:10,borderWidth:1,borderColor:"gray",borderRadius:4},buttonContainer:{width:"100%",marginTop:20}});const fe=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),r=(0,n.useState)(null),o=(0,d.default)(r,2),a=o[0],i=o[1],f=(0,n.useState)(null),g=(0,d.default)(f,2),m=g[0],x=g[1],y=(0,n.useState)(null),j=(0,d.default)(y,2),v=j[0],C=j[1],T=(0,n.useState)(null),w=(0,d.default)(T,2),P=w[0],I=w[1],B=(0,n.useState)({grado:"",nombre:"",matricula:""}),D=(0,d.default)(B,2),F=D[0],A=D[1];(0,n.useEffect)((function(){var e,r;console.log("=== SignatureIssuing - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),console.log("Estado original actual:",P),null!=(e=t.state)&&e.bitacoraId&&(console.log("BitacoraId recibido:",t.state.bitacoraId),x(t.state.bitacoraId)),null!=(r=t.state)&&r.signature&&(console.log("Firma recuperada del estado"),i(t.state.signature)),!P&&t.state&&(console.log("Guardando estado original"),I(t.state),t.state.formData?(console.log("Inicializando valores del formulario desde formData"),A(t.state.formData)):(t.state.grado||t.state.nombre||t.state.matricula)&&(console.log("Inicializando valores del formulario desde el estado original"),A({grado:t.state.grado||"",nombre:t.state.nombre||"",matricula:t.state.matricula||""})))}),[t.state,P]);var N=function(e){console.log("=== SignatureIssuing - handleSignatureComplete ==="),console.log("Firma recibida:",e?"Presente":"No presente"),e&&(console.log("Firma capturada:",e.substring(0,50)+"..."),i(e))},q=function(r){var o;console.log("=== SignatureIssuing - Navegando a SignaturePad ==="),console.log("Callback disponible:",null!=(o=t.state)&&o.onSignatureComplete?"S\xed":"No"),console.log("Estado original a mantener:",P),console.log("Valores del formulario a mantener:",r),e("/signature-pad",{state:{returnTo:"/signatureIssuing",bitacoraId:m,formData:r,onSignatureComplete:N}})},L=function(){var t=(0,S.default)((function*(t){if(console.log("=== SignatureIssuing - handleSubmit ==="),console.log("Valores del formulario:",t),console.log("Imagen de firma:",a?"Presente":"No presente"),console.log("BitacoraId a enviar:",m),console.log("Estado original a mantener:",P),m)if(a)try{var r=a;a.startsWith("data:image")&&(r=a.split(",")[1]);var o=yield fetch("http://localhost:3001/api/bitacora/signature-issuing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grado:t.grado,nombre:t.nombre,matricula:t.matricula,firma:{data:r,type:"image/png"},bitacoraId:m})});console.log("Respuesta del servidor - Status:",o.status);var n=yield o.json();if(console.log("Respuesta del servidor - Data:",n),!o.ok)throw new Error(n.message||"Error al guardar la firma");e("/signatureDoer",{state:{bitacoraId:m}})}catch(v){console.error("Error al guardar los datos:",v),C(v.message)}else c.default.alert("Error","Por favor, capture su firma antes de continuar.");else C("No se encontr\xf3 el ID de la bit\xe1cora")}));return function(e){return t.apply(this,arguments)}}();return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"Datos de quien emite la bit\xe1cora"}),body:(0,h.jsxs)(l.default,{style:ce.body,children:[v&&(0,h.jsx)(u.default,{style:ce.errorText,children:v}),(0,h.jsx)(E.Formik,{initialValues:F,validationSchema:ue,onSubmit:L,enableReinitialize:!0,children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.handleSubmit,n=e.values,i=e.errors,s=e.touched;return(0,h.jsxs)(l.default,{style:ce.formContainer,children:[(0,h.jsxs)(l.default,{style:ce.inputGroup,children:[(0,h.jsx)(u.default,{style:ce.label,children:"Grado*"}),(0,h.jsx)(O.default,{style:[ce.input,i.grado&&s.grado&&ce.inputError],onChangeText:t("grado"),onBlur:r("grado"),value:n.grado}),i.grado&&s.grado&&(0,h.jsx)(u.default,{style:ce.errorText,children:i.grado})]}),(0,h.jsxs)(l.default,{style:ce.inputGroup,children:[(0,h.jsx)(u.default,{style:ce.label,children:"Nombre*"}),(0,h.jsx)(O.default,{style:[ce.input,i.nombre&&s.nombre&&ce.inputError],onChangeText:t("nombre"),onBlur:r("nombre"),value:n.nombre}),i.nombre&&s.nombre&&(0,h.jsx)(u.default,{style:ce.errorText,children:i.nombre})]}),(0,h.jsxs)(l.default,{style:ce.inputGroup,children:[(0,h.jsx)(u.default,{style:ce.label,children:"Matr\xedcula*"}),(0,h.jsx)(O.default,{style:[ce.input,i.matricula&&s.matricula&&ce.inputError],onChangeText:t("matricula"),onBlur:r("matricula"),value:n.matricula}),i.matricula&&s.matricula&&(0,h.jsx)(u.default,{style:ce.errorText,children:i.matricula})]}),(0,h.jsxs)(l.default,{style:ce.signatureSection,children:[(0,h.jsx)(u.default,{style:ce.label,children:"Firma*"}),a?(0,h.jsxs)(l.default,{style:ce.signaturePreview,children:[(0,h.jsx)(de.default,{source:{uri:a},style:ce.signatureImage,resizeMode:"contain"}),(0,h.jsx)(p,{title:"Cambiar Firma",onPress:function(){return q(n)}})]}):(0,h.jsx)(p,{title:"Capturar Firma",onPress:function(){return q(n)}})]}),(0,h.jsx)(l.default,{style:ce.buttonContainer,children:(0,h.jsx)(p,{title:"Guardar y Continuar",onPress:o,disabled:!a})})]})}})]})})};function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){(0,F.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var he=P.object().shape({grado:P.string().required("El grado es requerido"),nombre:P.string().required("El nombre es requerido"),matricula:P.string().required("La matr\xedcula es requerida"),mel:P.string().required("El MEL es requerido")}),pe=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},formContainer:{width:"100%"},inputGroup:{marginBottom:15,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,borderRadius:4,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:5},signatureSection:{width:"100%",marginBottom:20},signaturePreview:{alignItems:"center",marginTop:10},signatureImage:{width:"100%",height:200,marginBottom:10,borderWidth:1,borderColor:"gray",borderRadius:4},buttonContainer:{width:"100%",marginTop:20}});const be=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),r=(0,n.useState)(null),o=(0,d.default)(r,2),a=o[0],i=o[1],c=(0,n.useState)(null),f=(0,d.default)(c,2),g=f[0],m=f[1],x=(0,n.useState)(null),y=(0,d.default)(x,2),j=y[0],v=y[1],C=(0,n.useState)(null),T=(0,d.default)(C,2),w=T[0],P=T[1],I=(0,n.useState)({grado:"",nombre:"",matricula:"",mel:""}),B=(0,d.default)(I,2),D=B[0],F=B[1];(0,n.useEffect)((function(){console.log("=== SignatureDoer - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),console.log("Estado original actual:",w),console.log("=== SignatureDoer - Debug Info ==="),console.log("URL actual:",window.location.pathname),console.log("Estado del componente:",{bitacoraId:g,signatureImage:a?"Presente":"No presente",error:j,initialFormValues:D}),t.state&&(t.state.bitacoraId&&(console.log("BitacoraId recibido:",t.state.bitacoraId),m(t.state.bitacoraId)),t.state.signature&&(console.log("Firma recibida del estado"),i(t.state.signature)),t.state.formData&&(console.log("Actualizando valores del formulario desde formData"),F(t.state.formData)),w||(console.log("Guardando estado original"),P(t.state)))}),[t.state,w,g,j,D,a]);var A=function(e){console.log("=== SignatureDoer - handleSignatureComplete ==="),console.log("Firma recibida:",e?"Presente":"No presente"),e&&(console.log("Firma capturada:",e.substring(0,50)+"..."),i(e))},N=function(r){var o;console.log("=== SignatureDoer - Navegando a SignaturePad ==="),console.log("Callback disponible:",null!=(o=t.state)&&o.onSignatureComplete?"S\xed":"No"),console.log("Estado original a mantener:",w),console.log("Valores del formulario a mantener:",r),e("/signature-pad",{state:{returnTo:"/signatureDoer",bitacoraId:g,formData:r,onSignatureComplete:A}})},q=function(){var t=(0,S.default)((function*(t){if(console.log("=== SignatureDoer - handleSubmit ==="),console.log("Valores del formulario:",t),console.log("Imagen de firma:",a?"Presente":"No presente"),console.log("BitacoraId a enviar:",g),console.log("Estado original a mantener:",w),g)if(a)try{var r=yield fetch("http://localhost:3001/api/bitacora/signature-doer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me(me({},t),{},{firma:{data:a,type:"image/png"},bitacoraId:g}))});console.log("Respuesta del servidor - Status:",r.status);var o=yield r.json();if(console.log("Respuesta del servidor - Data:",o),!r.ok)throw new Error(o.message||"Error al guardar la firma");console.log("=== SignatureDoer - Navegando a SignatureDelivery ==="),console.log("Estado a enviar:",me(me({},w),{},{bitacoraId:g,formData:t,signature:a})),e("/signatureDelivery",{state:{bitacoraId:g}})}catch(j){console.error("Error al guardar los datos:",j),v(j.message)}else v("La firma es requerida");else v("No se encontr\xf3 el ID de la bit\xe1cora")}));return function(e){return t.apply(this,arguments)}}();return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"Datos de quien realiz\xf3 las acciones"}),body:(0,h.jsxs)(l.default,{style:pe.body,children:[j&&(0,h.jsx)(u.default,{style:pe.errorText,children:j}),(0,h.jsx)(E.Formik,{initialValues:D,validationSchema:he,onSubmit:q,enableReinitialize:!0,children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.handleSubmit,n=e.values,i=e.errors,s=e.touched;return(0,h.jsxs)(l.default,{style:pe.formContainer,children:[(0,h.jsxs)(l.default,{style:pe.inputGroup,children:[(0,h.jsx)(u.default,{style:pe.label,children:"Grado*"}),(0,h.jsx)(O.default,{style:[pe.input,i.grado&&s.grado&&pe.inputError],onChangeText:t("grado"),onBlur:r("grado"),value:n.grado}),i.grado&&s.grado&&(0,h.jsx)(u.default,{style:pe.errorText,children:i.grado})]}),(0,h.jsxs)(l.default,{style:pe.inputGroup,children:[(0,h.jsx)(u.default,{style:pe.label,children:"Nombre*"}),(0,h.jsx)(O.default,{style:[pe.input,i.nombre&&s.nombre&&pe.inputError],onChangeText:t("nombre"),onBlur:r("nombre"),value:n.nombre}),i.nombre&&s.nombre&&(0,h.jsx)(u.default,{style:pe.errorText,children:i.nombre})]}),(0,h.jsxs)(l.default,{style:pe.inputGroup,children:[(0,h.jsx)(u.default,{style:pe.label,children:"Matr\xedcula*"}),(0,h.jsx)(O.default,{style:[pe.input,i.matricula&&s.matricula&&pe.inputError],onChangeText:t("matricula"),onBlur:r("matricula"),value:n.matricula}),i.matricula&&s.matricula&&(0,h.jsx)(u.default,{style:pe.errorText,children:i.matricula})]}),(0,h.jsxs)(l.default,{style:pe.inputGroup,children:[(0,h.jsx)(u.default,{style:pe.label,children:"MEL (Lista de Equipo m\xednimo)*"}),(0,h.jsx)(O.default,{style:[pe.input,i.mel&&s.mel&&pe.inputError],onChangeText:t("mel"),onBlur:r("mel"),value:n.mel}),i.mel&&s.mel&&(0,h.jsx)(u.default,{style:pe.errorText,children:i.mel})]}),(0,h.jsx)(l.default,{style:pe.signatureSection,children:a?(0,h.jsxs)(l.default,{style:pe.signaturePreview,children:[(0,h.jsx)(de.default,{source:{uri:a},style:pe.signatureImage,resizeMode:"contain"}),(0,h.jsx)(p,{title:"Cambiar Firma",onPress:function(){return N(n)}})]}):(0,h.jsx)(p,{title:"Capturar Firma",onPress:function(){return N(n)}})}),(0,h.jsx)(l.default,{style:pe.buttonContainer,children:(0,h.jsx)(p,{title:"Guardar y Continuar",onPress:o,disabled:!a})})]})}})]})})};function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,F.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=P.object().shape({grado:P.string().required("El grado es requerido"),nombre:P.string().required("El nombre es requerido"),matricula:P.string().required("La matr\xedcula es requerida")}),ve=a.default.create({body:{flex:1,justifyContent:"center",alignItems:"center",width:"80%"},formContainer:{width:"100%"},inputGroup:{marginBottom:15,width:"100%"},label:{textAlign:"left",marginBottom:5},input:{height:40,borderColor:"gray",borderWidth:1,borderRadius:4,paddingLeft:8,width:"100%"},inputError:{borderColor:"red"},errorText:{color:"red",fontSize:12,marginTop:5},signatureSection:{width:"100%",marginBottom:20},signaturePreview:{alignItems:"center",marginTop:10},signatureImage:{width:"100%",height:200,marginBottom:10,borderWidth:1,borderColor:"gray",borderRadius:4},buttonContainer:{width:"100%",marginTop:20}});const Ce=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),r=(0,n.useState)(null),o=(0,d.default)(r,2),a=o[0],i=o[1],c=(0,n.useState)(null),f=(0,d.default)(c,2),g=f[0],m=f[1],x=(0,n.useState)(null),y=(0,d.default)(x,2),j=y[0],v=y[1],C=(0,n.useState)({grado:"",nombre:"",matricula:""}),T=(0,d.default)(C,2),w=T[0],P=T[1];(0,n.useEffect)((function(){console.log("=== SignatureDelivery - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),t.state&&(t.state.bitacoraId&&(console.log("BitacoraId recibido:",t.state.bitacoraId),m(t.state.bitacoraId)),t.state.signature&&(console.log("Firma recibida del estado"),i(t.state.signature)),t.state.formData&&(console.log("Actualizando valores del formulario desde formData"),P(t.state.formData)))}),[t.state]);var I=function(e){console.log("=== SignatureDelivery - handleSignatureComplete ==="),console.log("Firma recibida:",e?"Presente":"No presente"),e&&(console.log("Firma capturada:",e.substring(0,50)+"..."),i(e))},B=function(r){var o;console.log("=== SignatureDelivery - Navegando a SignaturePad ==="),console.log("Callback disponible:",null!=(o=t.state)&&o.onSignatureComplete?"S\xed":"No"),console.log("Valores del formulario a mantener:",r),e("/signature-pad",{state:{returnTo:"/signatureDelivery",bitacoraId:g,formData:r,onSignatureComplete:I}})},D=function(){var t=(0,S.default)((function*(t){if(console.log("=== SignatureDelivery - handleSubmit ==="),console.log("Valores del formulario:",t),console.log("Imagen de firma:",a?"Presente":"No presente"),console.log("BitacoraId a enviar:",g),g)if(a)try{var r=yield fetch("http://localhost:3001/api/bitacora/signature-delivery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye(ye({},t),{},{firma:{data:a,type:"image/png"},bitacoraId:g}))});console.log("Respuesta del servidor - Status:",r.status);var o=yield r.json();if(console.log("Respuesta del servidor - Data:",o),!r.ok)throw new Error(o.message||"Error al guardar la firma");console.log("=== SignatureDelivery - Navegando a Comments ==="),console.log("Estado a enviar:",{bitacoraId:g}),e("/comments",{state:{bitacoraId:g}})}catch(j){console.error("Error al guardar los datos:",j),v(j.message)}else v("La firma es requerida");else v("No se encontr\xf3 el ID de la bit\xe1cora")}));return function(e){return t.apply(this,arguments)}}();return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"Datos de quien entrega aeronave"}),body:(0,h.jsxs)(l.default,{style:ve.body,children:[j&&(0,h.jsx)(u.default,{style:ve.errorText,children:j}),(0,h.jsx)(E.Formik,{initialValues:w,validationSchema:je,onSubmit:D,enableReinitialize:!0,children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.handleSubmit,n=e.values,i=e.errors,s=e.touched;return(0,h.jsxs)(l.default,{style:ve.formContainer,children:[(0,h.jsxs)(l.default,{style:ve.inputGroup,children:[(0,h.jsx)(u.default,{style:ve.label,children:"Grado*"}),(0,h.jsx)(O.default,{style:[ve.input,i.grado&&s.grado&&ve.inputError],onChangeText:t("grado"),onBlur:r("grado"),value:n.grado}),i.grado&&s.grado&&(0,h.jsx)(u.default,{style:ve.errorText,children:i.grado})]}),(0,h.jsxs)(l.default,{style:ve.inputGroup,children:[(0,h.jsx)(u.default,{style:ve.label,children:"Nombre*"}),(0,h.jsx)(O.default,{style:[ve.input,i.nombre&&s.nombre&&ve.inputError],onChangeText:t("nombre"),onBlur:r("nombre"),value:n.nombre}),i.nombre&&s.nombre&&(0,h.jsx)(u.default,{style:ve.errorText,children:i.nombre})]}),(0,h.jsxs)(l.default,{style:ve.inputGroup,children:[(0,h.jsx)(u.default,{style:ve.label,children:"Matr\xedcula*"}),(0,h.jsx)(O.default,{style:[ve.input,i.matricula&&s.matricula&&ve.inputError],onChangeText:t("matricula"),onBlur:r("matricula"),value:n.matricula}),i.matricula&&s.matricula&&(0,h.jsx)(u.default,{style:ve.errorText,children:i.matricula})]}),(0,h.jsxs)(l.default,{style:ve.signatureSection,children:[(0,h.jsx)(u.default,{style:ve.label,children:"Firma*"}),a?(0,h.jsxs)(l.default,{style:ve.signaturePreview,children:[(0,h.jsx)(de.default,{source:{uri:a},style:ve.signatureImage,resizeMode:"contain"}),(0,h.jsx)(p,{title:"Cambiar Firma",onPress:function(){return B(n)}})]}):(0,h.jsx)(p,{title:"Capturar Firma",onPress:function(){return B(n)}})]}),(0,h.jsx)(l.default,{style:ve.buttonContainer,children:(0,h.jsx)(p,{title:"Guardar y Continuar",onPress:o,disabled:!a})})]})}})]})})};var Se=r(3177),Te=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",width:"100%"},canvas:{borderWidth:1,borderColor:"#ccc",borderRadius:4,backgroundColor:"#fff"},buttonContainer:{flexDirection:"row",marginTop:20,gap:10},button:{padding:8,backgroundColor:"#414BB2",borderRadius:4,minWidth:100,alignItems:"center"},buttonText:{color:"white",fontSize:16}});const we=function(e){var t=e.onSave,r=e.onClear,o=(0,n.useRef)(null),a=(0,n.useRef)(!1),i=(0,n.useRef)(0),s=(0,n.useRef)(0);(0,n.useEffect)((function(){var e=o.current,t=e.getContext("2d");t.strokeStyle="#000000",t.lineWidth=2,t.lineCap="round",t.lineJoin="round";var r=function(t){a.current=!0;var r=e.getBoundingClientRect();i.current=t.clientX-r.left,s.current=t.clientY-r.top},n=function(r){if(a.current){var o=e.getBoundingClientRect(),n=r.clientX-o.left,l=r.clientY-o.top;t.beginPath(),t.moveTo(i.current,s.current),t.lineTo(n,l),t.stroke(),i.current=n,s.current=l}},l=function(){a.current=!1},d=function(t){t.preventDefault();var r=t.touches[0],o=e.getBoundingClientRect();i.current=r.clientX-o.left,s.current=r.clientY-o.top,a.current=!0},u=function(r){if(r.preventDefault(),a.current){var o=r.touches[0],n=e.getBoundingClientRect(),l=o.clientX-n.left,d=o.clientY-n.top;t.beginPath(),t.moveTo(i.current,s.current),t.lineTo(l,d),t.stroke(),i.current=l,s.current=d}},c=function(){a.current=!1};return e.addEventListener("mousedown",r),e.addEventListener("mousemove",n),e.addEventListener("mouseup",l),e.addEventListener("touchstart",d),e.addEventListener("touchmove",u),e.addEventListener("touchend",c),function(){e.removeEventListener("mousedown",r),e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",l),e.removeEventListener("touchstart",d),e.removeEventListener("touchmove",u),e.removeEventListener("touchend",c)}}),[]);return(0,h.jsxs)(l.default,{style:Te.container,children:[(0,h.jsx)("canvas",{ref:o,width:300,height:200,style:Te.canvas}),(0,h.jsxs)(l.default,{style:Te.buttonContainer,children:[(0,h.jsx)(m.default,{onPress:function(){var e=o.current;e.getContext("2d").clearRect(0,0,e.width,e.height),r()},style:Te.button,children:(0,h.jsx)(u.default,{style:Te.buttonText,children:"Limpiar"})}),(0,h.jsx)(m.default,{onPress:function(){var e=o.current.toDataURL("image/png");t(e)},style:Te.button,children:(0,h.jsx)(u.default,{style:Te.buttonText,children:"Guardar"})})]})]})};function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}var Ee=a.default.create({container:{flex:1,width:"100%"},signatureContainer:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,F.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({flex:1,width:"100%",height:300,backgroundColor:"#fff",borderRadius:4},void 0),buttonContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:20,paddingHorizontal:20},clearButton:{backgroundColor:"#FF3B30"}});const Pe=function(e){var t=e.onSave,r=e.isWeb,o=(0,n.useRef)(null),a=function(e){console.log("=== SignaturePad - handleSave ==="),console.log("Firma guardada:",e?"Presente":"No presente"),t(e)};return r?(0,h.jsx)(we,{onSave:a}):(0,h.jsxs)(l.default,{style:Ee.container,children:[(0,h.jsx)(l.default,{style:Ee.signatureContainer,children:(0,h.jsx)(Se.default,{ref:o,onOK:a,onEmpty:function(){return a(null)},descriptionText:"Firma",clearText:"Limpiar",confirmText:"Guardar",webStyle:"\n            .m-signature-pad--body {\n              border: 1px solid #e8e8e8;\n              border-radius: 4px;\n            }\n            .m-signature-pad--footer {\n              display: flex;\n              flex-direction: row;\n              justify-content: space-between;\n              padding: 10px;\n            }\n            .button {\n              padding: 10px 20px;\n              border-radius: 4px;\n              background-color: #007AFF;\n              color: white;\n              border: none;\n              cursor: pointer;\n            }\n            .button.clear {\n              background-color: #FF3B30;\n            }\n          ",androidStyle:"\n            .m-signature-pad--body {\n              border: 1px solid #e8e8e8;\n              border-radius: 4px;\n            }\n            .m-signature-pad--footer {\n              display: flex;\n              flex-direction: row;\n              justify-content: space-between;\n              padding: 10px;\n            }\n            .button {\n              padding: 10px 20px;\n              border-radius: 4px;\n              background-color: #007AFF;\n              color: white;\n              border: none;\n            }\n            .button.clear {\n              background-color: #FF3B30;\n            }\n          ",iosStyle:"\n            .m-signature-pad--body {\n              border: 1px solid #e8e8e8;\n              border-radius: 4px;\n            }\n            .m-signature-pad--footer {\n              display: flex;\n              flex-direction: row;\n              justify-content: space-between;\n              padding: 10px;\n            }\n            .button {\n              padding: 10px 20px;\n              border-radius: 4px;\n              background-color: #007AFF;\n              color: white;\n              border: none;\n            }\n            .button.clear {\n              background-color: #FF3B30;\n            }\n          "})}),!1]})};function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){(0,F.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var De=a.default.create({container:{flex:1,padding:20,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:20},card:Be({backgroundColor:"#fff",borderRadius:8,padding:15,marginBottom:20},{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.25)"}),buttonContainer:{alignItems:"center",marginTop:20}});const Fe=function(){var e=(0,s.useNavigate)(),t=(0,s.useLocation)(),r=(0,n.useState)(null),o=(0,d.default)(r,2),a=o[0],i=o[1],c=(0,n.useState)(!0),f=(0,d.default)(c,1)[0];(0,n.useEffect)((function(){console.log("=== SignaturePadPage - useEffect ==="),console.log("Estado de navegaci\xf3n:",t.state),console.log("Plataforma:","web")}),[t.state]);return(0,h.jsxs)(l.default,{style:De.container,children:[(0,h.jsx)(u.default,{style:De.title,children:"Captura de Firma"}),(0,h.jsx)(l.default,{style:De.card,children:(0,h.jsx)(Pe,{onSave:function(e){console.log("=== SignaturePadPage - handleSaveSignature ==="),console.log("Firma guardada exitosamente"),console.log("Estado de la firma:",e?"Presente":"No presente"),i(e)},isWeb:f})}),(0,h.jsx)(l.default,{style:De.buttonContainer,children:(0,h.jsx)(p,{title:"Finalizar Firma",onPress:function(){var r,o,n,l,i;console.log("=== SignaturePadPage - handleFinish ==="),console.log("Intentando finalizar firma..."),console.log("Estado de la firma:",a?"Presente":"No presente"),console.log("Callback disponible:",null!=(r=t.state)&&r.onSignatureComplete?"S\xed":"No"),console.log("Estado completo:",t.state),a&&null!=(o=t.state)&&o.onSignatureComplete&&(console.log("Ejecutando callback con la firma..."),t.state.onSignatureComplete(a)),console.log("Navegando a la p\xe1gina anterior..."),e((null==(n=t.state)?void 0:n.returnTo)||"/",{state:Be(Be({},t.state),{},{signature:a,bitacoraId:null==(l=t.state)?void 0:l.bitacoraId,formData:null==(i=t.state)?void 0:i.formData})})},disabled:!a})})]})};var Ae=a.default.create({body:{flex:1,justifyContent:"space-between",alignItems:"center",width:"100%",height:"100%"},textareaContainer:{width:"80%",height:"70%",marginVertical:20},textarea:{width:"100%",height:"100%",borderColor:"gray",borderWidth:1,borderRadius:4,padding:10,fontSize:16,backgroundColor:"white"},buttonContainer:{width:"80%",marginTop:20,marginBottom:20}});const Ne=function(){var e=(0,s.useNavigate)(),t=((0,s.useLocation)().state||{}).bitacoraId,r=function(){var r=(0,S.default)((function*(r){try{if(!t)return void c.default.alert("Error","No se encontr\xf3 el ID de la bit\xe1cora");if(!(yield fetch(`http://localhost:3001/api/bitacora/id/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({observacionesComments:r.comments})})).ok)throw new Error("Error al actualizar los comentarios");var o=yield fetch(`http://localhost:3001/api/bitacora/${t}/export-excel`,{method:"POST"});if(!o.ok)throw new Error("Error al exportar a Excel");var n=yield o.blob(),a=window.URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`BITACORA-${t}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(a),document.body.removeChild(l),c.default.alert("\xc9xito","Bit\xe1cora exportada exitosamente"),e("/")}catch(i){console.error("Error:",i),c.default.alert("Error",i.message||"Hubo un problema al procesar la solicitud")}}));return function(e){return r.apply(this,arguments)}}();return(0,h.jsx)(k,{header:(0,h.jsx)(b,{titleName:"Observaciones y/o comentarios"}),body:(0,h.jsx)(E.Formik,{initialValues:{comments:""},onSubmit:r,children:function(e){var t=e.handleChange,r=e.handleBlur,o=e.handleSubmit,n=e.values;return(0,h.jsxs)(l.default,{style:Ae.body,children:[(0,h.jsx)(l.default,{style:Ae.textareaContainer,children:(0,h.jsx)(O.default,{style:Ae.textarea,onChangeText:t("comments"),onBlur:r("comments"),value:n.comments,multiline:!0,numberOfLines:20,placeholder:"Ingrese sus observaciones o comentarios aqu\xed...",textAlignVertical:"top"})}),(0,h.jsx)(l.default,{style:Ae.buttonContainer,children:(0,h.jsx)(p,{title:"Imprimir",onPress:o})})]})}})})};var ke=r(7109);function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){(0,F.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re=a.default.create({container:{flex:1,padding:16,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},formGroup:{marginBottom:16},label:{fontSize:16,marginBottom:8,fontWeight:"500"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16},readOnlyInput:{backgroundColor:"#f5f5f5",color:"#666"},textArea:{height:100,textAlignVertical:"top"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:20},button:{padding:12,borderRadius:8,minWidth:150,alignItems:"center"},cancelButton:{backgroundColor:"#e0e0e0"},submitButton:{backgroundColor:"#3b82f6"},buttonText:{color:"#fff",fontSize:16,fontWeight:"500"},errorContainer:{backgroundColor:"#fee2e2",borderColor:"#f87171",borderWidth:1,borderRadius:8,padding:12,marginBottom:16},errorText:{color:"#dc2626",fontSize:14},successContainer:{backgroundColor:"#dcfce7",borderColor:"#4ade80",borderWidth:1,borderRadius:8,padding:12,marginBottom:16},successText:{color:"#16a34a",fontSize:14}});const ze=function(){var e=(0,s.useParams)().folio,t=(0,s.useNavigate)(),r=(0,n.useState)({folio:"",fecha:"",hora:"",tipo:"",descripcion:"",correccion:""}),o=(0,d.default)(r,2),a=o[0],i=o[1],c=(0,n.useState)(""),f=(0,d.default)(c,2),g=f[0],p=f[1],b=(0,n.useState)(""),x=(0,d.default)(b,2),y=x[0],j=x[1];(0,n.useEffect)((function(){var t=function(){var t=(0,S.default)((function*(){try{var t=(yield ke.default.get(`http://localhost:3001/api/bitacoras/${e}`)).data;i({folio:t.folio,fecha:t.fecha,hora:t.hora,tipo:t.tipo,descripcion:t.descripcion,correccion:""})}catch(g){console.error("Error fetching bitacora:",g),p("Error al cargar los datos de la bit\xe1cora")}}));return function(){return t.apply(this,arguments)}}();t()}),[e]);var v=function(){var r=(0,S.default)((function*(){if(p(""),j(""),a.correccion.trim())try{yield ke.default.patch(`http://localhost:3001/api/bitacora/${e}/correcciones`,{correccion:a.correccion,usuario:"Usuario"});j("Correcci\xf3n agregada exitosamente"),setTimeout((function(){t("/")}),2e3)}catch(g){var r,o;console.error("Error submitting correction:",g),p((null==(r=g.response)||null==(o=r.data)?void 0:o.error)||"Error al guardar la correcci\xf3n")}else p("La correcci\xf3n es requerida")}));return function(){return r.apply(this,arguments)}}();return(0,h.jsxs)(A.default,{style:Re.container,children:[(0,h.jsx)(u.default,{style:Re.title,children:"Agregar Correcci\xf3n"}),g?(0,h.jsx)(l.default,{style:Re.errorContainer,children:(0,h.jsx)(u.default,{style:Re.errorText,children:g})}):null,y?(0,h.jsx)(l.default,{style:Re.successContainer,children:(0,h.jsx)(u.default,{style:Re.successText,children:y})}):null,(0,h.jsxs)(l.default,{style:Re.formGroup,children:[(0,h.jsx)(u.default,{style:Re.label,children:"Folio"}),(0,h.jsx)(O.default,{style:[Re.input,Re.readOnlyInput],value:a.folio,editable:!1})]}),(0,h.jsxs)(l.default,{style:Re.formGroup,children:[(0,h.jsx)(u.default,{style:Re.label,children:"Fecha"}),(0,h.jsx)(O.default,{style:[Re.input,Re.readOnlyInput],value:a.fecha,editable:!1})]}),(0,h.jsxs)(l.default,{style:Re.formGroup,children:[(0,h.jsx)(u.default,{style:Re.label,children:"Hora"}),(0,h.jsx)(O.default,{style:[Re.input,Re.readOnlyInput],value:a.hora,editable:!1})]}),(0,h.jsxs)(l.default,{style:Re.formGroup,children:[(0,h.jsx)(u.default,{style:Re.label,children:"Tipo"}),(0,h.jsx)(O.default,{style:[Re.input,Re.readOnlyInput],value:a.tipo,editable:!1})]}),(0,h.jsxs)(l.default,{style:Re.formGroup,children:[(0,h.jsx)(u.default,{style:Re.label,children:"Descripci\xf3n"}),(0,h.jsx)(O.default,{style:[Re.input,Re.readOnlyInput,Re.textArea],value:a.descripcion,editable:!1,multiline:!0})]}),(0,h.jsxs)(l.default,{style:Re.formGroup,children:[(0,h.jsx)(u.default,{style:Re.label,children:"Correcci\xf3n"}),(0,h.jsx)(O.default,{style:[Re.input,Re.textArea],value:a.correccion,onChangeText:function(e){return t="correccion",r=e,i((function(e){return Le(Le({},e),{},(0,F.default)({},t,r))})),void p("");var t,r},placeholder:"Ingrese la correcci\xf3n...",multiline:!0})]}),(0,h.jsxs)(l.default,{style:Re.buttonContainer,children:[(0,h.jsx)(m.default,{style:[Re.button,Re.cancelButton],onPress:function(){return t("/")},children:(0,h.jsx)(u.default,{style:Re.buttonText,children:"Cancelar"})}),(0,h.jsx)(m.default,{style:[Re.button,Re.submitButton],onPress:v,children:(0,h.jsx)(u.default,{style:Re.buttonText,children:"Guardar Correcci\xf3n"})})]})]})};var Ge=a.default.create({container:{paddingTop:40,backgroundColor:"white",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:10},titleContainer:{flex:.9,alignItems:"flex-end"},iconContainer:{flex:.1,alignItems:"flex-end",marginTop:10},title:{color:"black",fontSize:20,fontWeight:"bold"}});const Ve=function(){return(0,h.jsxs)(l.default,{style:Ge.container,children:[(0,h.jsx)(l.default,{style:Ge.iconContainer,children:(0,h.jsxs)(u.default,{children:[(0,h.jsx)(f.default,{name:"home",size:25,color:"black"})," "]})}),(0,h.jsx)(l.default,{style:Ge.titleContainer,children:(0,h.jsx)(i.Link,{to:"/",component:m.default,children:(0,h.jsx)(u.default,{style:Ge.title,children:"Bit\xe1cora App"})})})]})};const We=function(){return(0,h.jsxs)(i.NativeRouter,{children:[(0,h.jsx)(Ve,{}),(0,h.jsxs)(s.Routes,{children:[(0,h.jsx)(s.Route,{path:"/",element:(0,h.jsx)(w,{})}),(0,h.jsx)(s.Route,{path:"/home",element:(0,h.jsx)(C,{})}),(0,h.jsx)(s.Route,{path:"/newBitacora",element:(0,h.jsx)(D,{})}),(0,h.jsx)(s.Route,{path:"/InfoFlight",element:(0,h.jsx)(H,{})}),(0,h.jsx)(s.Route,{path:"/InfoFlightPt2",element:(0,h.jsx)(Q,{})}),(0,h.jsx)(s.Route,{path:"/InfoFlightComponents",element:(0,h.jsx)(oe,{})}),(0,h.jsx)(s.Route,{path:"/InfoFlightOrders",element:(0,h.jsx)(se,{})}),(0,h.jsx)(s.Route,{path:"/signatureIssuing",element:(0,h.jsx)(fe,{})}),(0,h.jsx)(s.Route,{path:"/signatureDoer",element:(0,h.jsx)(be,{})}),(0,h.jsx)(s.Route,{path:"/signatureDelivery",element:(0,h.jsx)(Ce,{})}),(0,h.jsx)(s.Route,{path:"/signature-pad",element:(0,h.jsx)(Fe,{})}),(0,h.jsx)(s.Route,{path:"/comments",element:(0,h.jsx)(Ne,{})}),(0,h.jsx)(s.Route,{path:"/correccion/:folio",element:(0,h.jsx)(ze,{})})]})]})};function Me(){return(0,h.jsxs)(l.default,{style:Ue.container,children:[(0,h.jsx)(We,{}),(0,h.jsx)(o.StatusBar,{style:"auto"})]})}var Ue=a.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.m=e,(()=>{var e=[];r.O=(t,o,n,a)=>{if(!o){var l=1/0;for(u=0;u<e.length;u++){for(var[o,n,a]=e[u],i=!0,s=0;s<o.length;s++)(!1&a||l>=a)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,n,a]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if("object"===typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&"function"===typeof o.then)return o}var a=Object.create(null);r.r(a);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&o;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>l[e]=()=>o[e]));return l.default=()=>o,r.d(a,l),a}})(),r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,a,[l,i,s]=o,d=0;if(l.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var u=s(r)}for(t&&t(o);d<l.length;d++)a=l[d],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=r.O(void 0,[675],(()=>r(5036)));o=r.O(o)})();
//# sourceMappingURL=main.072d07e4.js.map